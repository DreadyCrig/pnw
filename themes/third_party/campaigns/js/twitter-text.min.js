!function(){function c(b,c){return c=c||"","string"!=typeof b&&(b.global&&c.indexOf("g")<0&&(c+="g"),b.ignoreCase&&c.indexOf("i")<0&&(c+="i"),b.multiline&&c.indexOf("m")<0&&(c+="m"),b=b.source),new RegExp(b.replace(/#\{(\w+)\}/g,function(b,c){var d=a.txt.regexen[c]||"";return"string"!=typeof d&&(d=d.source),d}),c)}function d(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function e(a,b,c){var d=String.fromCharCode(b);return c!==b&&(d+="-"+String.fromCharCode(c)),a.push(d),a}function q(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function u(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:"string"==typeof a&&a.match(b)&&RegExp["$&"]===a}if("undefined"==typeof a||null===a)var a={};a.txt={},a.txt.regexen={};var b={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};a.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return b[a]})},a.txt.regexSupplant=c,a.txt.stringSupplant=d,a.txt.addCharsToCharClass=e;var f=String.fromCharCode,g=[f(32),f(133),f(160),f(5760),f(6158),f(8232),f(8233),f(8239),f(8287),f(12288)];e(g,9,13),e(g,8192,8202);var h=[f(65534),f(65279),f(65535)];e(h,8234,8238),a.txt.regexen.spaces_group=c(g.join("")),a.txt.regexen.spaces=c("["+g.join("")+"]"),a.txt.regexen.invalid_chars_group=c(h.join("")),a.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,a.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,a.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;var i=[];e(i,1024,1279),e(i,1280,1319),e(i,11744,11775),e(i,42560,42655),e(i,1425,1471),e(i,1473,1474),e(i,1476,1477),e(i,1479,1479),e(i,1488,1514),e(i,1520,1524),e(i,64274,64296),e(i,64298,64310),e(i,64312,64316),e(i,64318,64318),e(i,64320,64321),e(i,64323,64324),e(i,64326,64335),e(i,1552,1562),e(i,1568,1631),e(i,1646,1747),e(i,1749,1756),e(i,1758,1768),e(i,1770,1775),e(i,1786,1788),e(i,1791,1791),e(i,1872,1919),e(i,2208,2208),e(i,2210,2220),e(i,2276,2302),e(i,64336,64433),e(i,64467,64829),e(i,64848,64911),e(i,64914,64967),e(i,65008,65019),e(i,65136,65140),e(i,65142,65276),e(i,8204,8204),e(i,3585,3642),e(i,3648,3662),e(i,4352,4607),e(i,12592,12677),e(i,43360,43391),e(i,44032,55215),e(i,55216,55295),e(i,65441,65500),e(i,12449,12538),e(i,12540,12542),e(i,65382,65439),e(i,65392,65392),e(i,65296,65305),e(i,65313,65338),e(i,65345,65370),e(i,12353,12438),e(i,12441,12446),e(i,13312,19903),e(i,19968,40959),e(i,173824,177983),e(i,177984,178207),e(i,194560,195103),e(i,12291,12291),e(i,12293,12293),e(i,12347,12347),a.txt.regexen.nonLatinHashtagChars=c(i.join(""));var j=[];e(j,192,214),e(j,216,246),e(j,248,255),e(j,256,591),e(j,595,596),e(j,598,599),e(j,601,601),e(j,603,603),e(j,611,611),e(j,616,616),e(j,623,623),e(j,626,626),e(j,649,649),e(j,651,651),e(j,699,699),e(j,768,879),e(j,7680,7935),a.txt.regexen.latinAccentChars=c(j.join("")),a.txt.regexen.hashSigns=/[#\uff03]/,a.txt.regexen.hashtagAlpha=c(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),a.txt.regexen.hashtagAlphaNumeric=c(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),a.txt.regexen.endHashtagMatch=c(/^(?:#{hashSigns}|:\/\/)/),a.txt.regexen.hashtagBoundary=c(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),a.txt.regexen.validHashtag=c(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),a.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|RT:?)/,a.txt.regexen.atSigns=/[@\uff20]/,a.txt.regexen.validMentionOrList=c("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),a.txt.regexen.validReply=c(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),a.txt.regexen.endMentionMatch=c(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),a.txt.regexen.validUrlPrecedingChars=c(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/),a.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,a.txt.regexen.invalidDomainChars=d("#{punct}#{spaces_group}#{invalid_chars_group}",a.txt.regexen),a.txt.regexen.validDomainChars=c(/[^#{invalidDomainChars}]/),a.txt.regexen.validSubdomain=c(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),a.txt.regexen.validDomainName=c(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),a.txt.regexen.validGTLD=c(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/),a.txt.regexen.validCCTLD=c(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))")),a.txt.regexen.validPunycode=c(/(?:xn--[0-9a-z]+)/),a.txt.regexen.validDomain=c(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),a.txt.regexen.validAsciiDomain=c(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),a.txt.regexen.invalidShortDomain=c(/^#{validDomainName}#{validCCTLD}$/),a.txt.regexen.validPortNumber=c(/[0-9]+/),a.txt.regexen.validGeneralUrlPathChars=c(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),a.txt.regexen.validUrlBalancedParens=c(/\(#{validGeneralUrlPathChars}+\)/i),a.txt.regexen.validUrlPathEndingChars=c(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),a.txt.regexen.validUrlPath=c("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),a.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,a.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,a.txt.regexen.extractUrl=c("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),a.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,a.txt.regexen.urlHasProtocol=/^https?:\/\//i,a.txt.regexen.urlHasHttps=/^https:\/\//i,a.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,a.txt.regexen.validCashtag=c("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),a.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,a.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,a.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,a.txt.regexen.validateUrlPchar=c("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),a.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,a.txt.regexen.validateUrlUserinfo=c("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),a.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,a.txt.regexen.validateUrlIpv4=c(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),a.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,a.txt.regexen.validateUrlIp=c("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),a.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,a.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,a.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,a.txt.regexen.validateUrlDomain=c(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),a.txt.regexen.validateUrlHost=c("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),a.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,a.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,a.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,a.txt.regexen.validateUrlUnicodeDomain=c(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),a.txt.regexen.validateUrlUnicodeHost=c("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),a.txt.regexen.validateUrlPort=/[0-9]{1,5}/,a.txt.regexen.validateUrlUnicodeAuthority=c("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),a.txt.regexen.validateUrlAuthority=c("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),a.txt.regexen.validateUrlPath=c(/(\/#{validateUrlPchar}*)*/i),a.txt.regexen.validateUrlQuery=c(/(#{validateUrlPchar}|\/|\?)*/i),a.txt.regexen.validateUrlFragment=c(/(#{validateUrlPchar}|\/|\?)*/i),a.txt.regexen.validateUrlUnencoded=c("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var k="tweet-url list-slug",l="tweet-url username",m="tweet-url hashtag",n="tweet-url cashtag",o={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},p={disabled:!0,readonly:!0,multiple:!0,checked:!0};a.txt.tagAttrs=function(b){var c="";for(var d in b){var e=b[d];p[d]&&(e=e?d:null),null!=e&&(c+=" "+a.txt.htmlEscape(d)+'="'+a.txt.htmlEscape(e.toString())+'"')}return c},a.txt.linkToText=function(b,c,e,f){f.suppressNoFollow||(e.rel="nofollow"),f.linkAttributeBlock&&f.linkAttributeBlock(b,e),f.linkTextBlock&&(c=f.linkTextBlock(b,c));var g={text:c,attr:a.txt.tagAttrs(e)};return d("<a#{attr}>#{text}</a>",g)},a.txt.linkToTextWithSymbol=function(b,c,d,e,f){var g=f.symbolTag?"<"+f.symbolTag+">"+c+"</"+f.symbolTag+">":c;d=a.txt.htmlEscape(d);var h=f.textWithSymbolTag?"<"+f.textWithSymbolTag+">"+d+"</"+f.textWithSymbolTag+">":d;return f.usernameIncludeSymbol||!c.match(a.txt.regexen.atSigns)?a.txt.linkToText(b,g+h,e,f):g+a.txt.linkToText(b,h,e,f)},a.txt.linkToHashtag=function(b,c,d){var e=c.substring(b.indices[0],b.indices[0]+1),f=a.txt.htmlEscape(b.hashtag),g=q(d.htmlAttrs||{});return g.href=d.hashtagUrlBase+f,g.title="#"+f,g["class"]=d.hashtagClass,f.charAt(0).match(a.txt.regexen.rtl_chars)&&(g["class"]+=" rtl"),d.targetBlank&&(g.target="_blank"),a.txt.linkToTextWithSymbol(b,e,f,g,d)},a.txt.linkToCashtag=function(b,c,d){var e=a.txt.htmlEscape(b.cashtag),f=q(d.htmlAttrs||{});return f.href=d.cashtagUrlBase+e,f.title="$"+e,f["class"]=d.cashtagClass,d.targetBlank&&(f.target="_blank"),a.txt.linkToTextWithSymbol(b,"$",e,f,d)},a.txt.linkToMentionAndList=function(b,c,d){var e=c.substring(b.indices[0],b.indices[0]+1),f=a.txt.htmlEscape(b.screenName),g=a.txt.htmlEscape(b.listSlug),h=b.listSlug&&!d.suppressLists,i=q(d.htmlAttrs||{});return i["class"]=h?d.listClass:d.usernameClass,i.href=h?d.listUrlBase+f+g:d.usernameUrlBase+f,h||d.suppressDataScreenName||(i["data-screen-name"]=f),d.targetBlank&&(i.target="_blank"),a.txt.linkToTextWithSymbol(b,e,h?f+g:f,i,d)},a.txt.linkToUrl=function(b,c,d){var e=b.url,f=e,g=a.txt.htmlEscape(f),h=d.urlEntities&&d.urlEntities[e]||b;h.display_url&&(g=a.txt.linkTextWithEntity(h,d));var i=q(d.htmlAttrs||{});return e.match(a.txt.regexen.urlHasProtocol)||(e="http://"+e),i.href=e,d.targetBlank&&(i.target="_blank"),d.urlClass&&(i["class"]=d.urlClass),d.urlTarget&&(i.target=d.urlTarget),!d.title&&h.display_url&&(i.title=h.expanded_url),a.txt.linkToText(b,g,i,d)},a.txt.linkTextWithEntity=function(b,c){var e=b.display_url,f=b.expanded_url,g=e.replace(/\u2026/g,"");if(-1!=f.indexOf(g)){var h=f.indexOf(g),i={displayUrlSansEllipses:g,beforeDisplayUrl:f.substr(0,h),afterDisplayUrl:f.substr(h+g.length),precedingEllipsis:e.match(/^\u2026/)?"\u2026":"",followingEllipsis:e.match(/\u2026$/)?"\u2026":""};for(var j in i)i.hasOwnProperty(j)&&(i[j]=a.txt.htmlEscape(i[j]));return i.invisible=c.invisibleTagAttrs,d("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",i)}return e},a.txt.autoLinkEntities=function(b,c,d){d=q(d||{}),d.hashtagClass=d.hashtagClass||m,d.hashtagUrlBase=d.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",d.cashtagClass=d.cashtagClass||n,d.cashtagUrlBase=d.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",d.listClass=d.listClass||k,d.usernameClass=d.usernameClass||l,d.usernameUrlBase=d.usernameUrlBase||"https://twitter.com/",d.listUrlBase=d.listUrlBase||"https://twitter.com/",d.htmlAttrs=a.txt.extractHtmlAttrsFromOptions(d),d.invisibleTagAttrs=d.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var e,f,g;if(d.urlEntities){for(e={},f=0,g=d.urlEntities.length;g>f;f++)e[d.urlEntities[f].url]=d.urlEntities[f];d.urlEntities=e}var h="",i=0;c.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var j=d.htmlEscapeNonEntities?a.txt.htmlEscape:function(a){return a},f=0;f<c.length;f++){var o=c[f];h+=j(b.substring(i,o.indices[0])),o.url?h+=a.txt.linkToUrl(o,b,d):o.hashtag?h+=a.txt.linkToHashtag(o,b,d):o.screenName?h+=a.txt.linkToMentionAndList(o,b,d):o.cashtag&&(h+=a.txt.linkToCashtag(o,b,d)),i=o.indices[1]}return h+=j(b.substring(i,b.length))},a.txt.autoLinkWithJSON=function(b,c,d){var e=[];for(var f in c)e=e.concat(c[f]);for(var g=0;g<e.length;g++)entity=e[g],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);return a.txt.modifyIndicesFromUnicodeToUTF16(b,e),a.txt.autoLinkEntities(b,e,d)},a.txt.extractHtmlAttrsFromOptions=function(a){var b={};for(var c in a){var d=a[c];o[c]||(p[c]&&(d=d?c:null),null!=d&&(b[c]=d))}return b},a.txt.autoLink=function(b,c){var d=a.txt.extractEntitiesWithIndices(b,{extractUrlsWithoutProtocol:!1});return a.txt.autoLinkEntities(b,d,c)},a.txt.autoLinkUsernamesOrLists=function(b,c){var d=a.txt.extractMentionsOrListsWithIndices(b);return a.txt.autoLinkEntities(b,d,c)},a.txt.autoLinkHashtags=function(b,c){var d=a.txt.extractHashtagsWithIndices(b);return a.txt.autoLinkEntities(b,d,c)},a.txt.autoLinkCashtags=function(b,c){var d=a.txt.extractCashtagsWithIndices(b);return a.txt.autoLinkEntities(b,d,c)},a.txt.autoLinkUrlsCustom=function(b,c){var d=a.txt.extractUrlsWithIndices(b,{extractUrlsWithoutProtocol:!1});return a.txt.autoLinkEntities(b,d,c)},a.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var b=a[0],c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]},a.txt.extractEntitiesWithIndices=function(b,c){var d=a.txt.extractUrlsWithIndices(b,c).concat(a.txt.extractMentionsOrListsWithIndices(b)).concat(a.txt.extractHashtagsWithIndices(b,{checkUrlOverlap:!1})).concat(a.txt.extractCashtagsWithIndices(b));return 0==d.length?[]:(a.txt.removeOverlappingEntities(d),d)},a.txt.extractMentions=function(b){for(var c=[],d=a.txt.extractMentionsWithIndices(b),e=0;e<d.length;e++){var f=d[e].screenName;c.push(f)}return c},a.txt.extractMentionsWithIndices=function(b){for(var d,c=[],e=a.txt.extractMentionsOrListsWithIndices(b),f=0;f<e.length;f++)d=e[f],""==d.listSlug&&c.push({screenName:d.screenName,indices:d.indices});return c},a.txt.extractMentionsOrListsWithIndices=function(b){if(!b||!b.match(a.txt.regexen.atSigns))return[];var c=[];return b.replace(a.txt.regexen.validMentionOrList,function(b,d,e,f,g,h,i){var j=i.slice(h+b.length);if(!j.match(a.txt.regexen.endMentionMatch)){g=g||"";var k=h+d.length,l=k+f.length+g.length+1;c.push({screenName:f,listSlug:g,indices:[k,l]})}}),c},a.txt.extractReplies=function(b){if(!b)return null;var c=b.match(a.txt.regexen.validReply);return!c||RegExp.rightContext.match(a.txt.regexen.endMentionMatch)?null:c[1]},a.txt.extractUrls=function(b,c){for(var d=[],e=a.txt.extractUrlsWithIndices(b,c),f=0;f<e.length;f++)d.push(e[f].url);return d},a.txt.extractUrlsWithIndices=function(b,c){if(c||(c={extractUrlsWithoutProtocol:!0}),!b||(c.extractUrlsWithoutProtocol?!b.match(/\./):!b.match(/:/)))return[];for(var d=[];a.txt.regexen.extractUrl.exec(b);){var e=RegExp.$2,f=RegExp.$3,g=RegExp.$4,h=RegExp.$5,i=RegExp.$7,j=a.txt.regexen.extractUrl.lastIndex,k=j-f.length;if(g)f.match(a.txt.regexen.validTcoUrl)&&(f=RegExp.lastMatch,j=k+f.length),d.push({url:f,indices:[k,j]});else{if(!c.extractUrlsWithoutProtocol||e.match(a.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var l=null,m=!1,n=0;if(h.replace(a.txt.regexen.validAsciiDomain,function(b){var c=h.indexOf(b,n);n=c+b.length,l={url:b,indices:[k+c,k+n]},m=b.match(a.txt.regexen.invalidShortDomain),m||d.push(l)}),null==l)continue;i&&(m&&d.push(l),l.url=f.replace(h,l.url),l.indices[1]=j)}}return d},a.txt.extractHashtags=function(b){for(var c=[],d=a.txt.extractHashtagsWithIndices(b),e=0;e<d.length;e++)c.push(d[e].hashtag);return c},a.txt.extractHashtagsWithIndices=function(b,c){if(c||(c={checkUrlOverlap:!0}),!b||!b.match(a.txt.regexen.hashSigns))return[];var d=[];if(b.replace(a.txt.regexen.validHashtag,function(b,c,e,f,g,h){var i=h.slice(g+b.length);if(!i.match(a.txt.regexen.endHashtagMatch)){var j=g+c.length,k=j+f.length+1;d.push({hashtag:f,indices:[j,k]})}}),c.checkUrlOverlap){var e=a.txt.extractUrlsWithIndices(b);if(e.length>0){var f=d.concat(e);a.txt.removeOverlappingEntities(f),d=[];for(var g=0;g<f.length;g++)f[g].hashtag&&d.push(f[g])}}return d},a.txt.extractCashtags=function(b){for(var c=[],d=a.txt.extractCashtagsWithIndices(b),e=0;e<d.length;e++)c.push(d[e].cashtag);return c},a.txt.extractCashtagsWithIndices=function(b){if(!b||-1==b.indexOf("$"))return[];var c=[];return b.replace(a.txt.regexen.validCashtag,function(a,b,d,e,f){var h=f+b.length,i=h+e.length+1;c.push({cashtag:e,indices:[h,i]})}),c},a.txt.modifyIndicesFromUnicodeToUTF16=function(b,c){a.txt.convertUnicodeIndices(b,c,!1)},a.txt.modifyIndicesFromUTF16ToUnicode=function(b,c){a.txt.convertUnicodeIndices(b,c,!0)},a.txt.getUnicodeTextLength=function(b){return b.replace(a.txt.regexen.non_bmp_code_pairs," ").length},a.txt.convertUnicodeIndices=function(a,b,c){if(0!=b.length){var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,g=b[0];d<a.length;){if(g.indices[0]==(c?d:e)){var h=g.indices[1]-g.indices[0];if(g.indices[0]=c?e:d,g.indices[1]=g.indices[0]+h,f++,f==b.length)break;g=b[f]}var i=a.charCodeAt(d);i>=55296&&56319>=i&&d<a.length-1&&(i=a.charCodeAt(d+1),i>=56320&&57343>=i&&d++),e++,d++}}},a.txt.splitTags=function(a){for(var c,e,b=a.split("<"),d=[],f=0;f<b.length;f+=1)if(e=b[f]){c=e.split(">");for(var g=0;g<c.length;g+=1)d.push(c[g])}else d.push("");return d},a.txt.hitHighlight=function(b,c,d){var e="em";if(c=c||[],d=d||{},0===c.length)return b;var i,j,s,t,u,v,w,f=d.tag||e,g=["<"+f+">","</"+f+">"],h=a.txt.splitTags(b),k="",l=0,m=h[0],n=0,o=0,p=!1,q=m,r=[];for(i=0;i<c.length;i+=1)for(j=0;j<c[i].length;j+=1)r.push(c[i][j]);for(s=0;s<r.length;s+=1){for(t=r[s],u=g[s%2],v=!1;null!=m&&t>=n+m.length;)k+=q.slice(o),p&&t===n+q.length&&(k+=u,v=!0),h[l+1]&&(k+="<"+h[l+1]+">"),n+=q.length,o=0,l+=2,m=h[l],q=m,p=!1;v||null==m?v||(v=!0,k+=u):(w=t-n,k+=q.slice(o,w)+u,o=w,p=0===s%2?!0:!1)}if(null!=m)for(o<q.length&&(k+=q.slice(o)),s=l+1;s<h.length;s+=1)k+=0===s%2?h[s]:"<"+h[s]+">";return k};var r=140,s=[f(65534),f(65279),f(65535),f(8234),f(8235),f(8236),f(8237),f(8238)];a.txt.getTweetLength=function(b,c){c||(c={short_url_length:22,short_url_length_https:23});var d=a.txt.getUnicodeTextLength(b),e=a.txt.extractUrlsWithIndices(b);a.txt.modifyIndicesFromUTF16ToUnicode(b,e);for(var f=0;f<e.length;f++)d+=e[f].indices[0]-e[f].indices[1],d+=e[f].url.toLowerCase().match(a.txt.regexen.urlHasHttps)?c.short_url_length_https:c.short_url_length;return d},a.txt.isInvalidTweet=function(b){if(!b)return"empty";if(a.txt.getTweetLength(b)>r)return"too_long";for(var c=0;c<s.length;c++)if(b.indexOf(s[c])>=0)return"invalid_characters";return!1},a.txt.isValidTweetText=function(b){return!a.txt.isInvalidTweet(b)},a.txt.isValidUsername=function(b){if(!b)return!1;var c=a.txt.extractMentions(b);return 1===c.length&&c[0]===b.slice(1)};var t=c(/^#{validMentionOrList}$/);if(a.txt.isValidList=function(a){var b=a.match(t);return!(!b||""!=b[1]||!b[4])},a.txt.isValidHashtag=function(b){if(!b)return!1;var c=a.txt.extractHashtags(b);return 1===c.length&&c[0]===b.slice(1)},a.txt.isValidUrl=function(b,c,d){if(null==c&&(c=!0),null==d&&(d=!0),!b)return!1;var e=b.match(a.txt.regexen.validateUrlUnencoded);if(!e||e[0]!==b)return!1;var f=e[1],g=e[2],h=e[3],i=e[4],j=e[5];return(!d||u(f,a.txt.regexen.validateUrlScheme)&&f.match(/^https?$/i))&&u(h,a.txt.regexen.validateUrlPath)&&u(i,a.txt.regexen.validateUrlQuery,!0)&&u(j,a.txt.regexen.validateUrlFragment,!0)?c&&u(g,a.txt.regexen.validateUrlUnicodeAuthority)||!c&&u(g,a.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=a.txt),"undefined"!=typeof window)if(window.twttr)for(var v in a)window.twttr[v]=a[v];else window.twttr=a}();