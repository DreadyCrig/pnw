!function(a,b){"use strict";function c(a){a.preventDefault(),Campaigns.GROUP_ID>1||(Campaigns.ajaxError.holder.show(),b("html, body").stop().animate({scrollTop:Campaigns.ajaxError.holder.offset().top},1e3),b('<iframe id="campaigns_error_iframe" style="width:100%;height:300px"/>').load(function(){b("#campaigns_error_iframe").contents().find("body").append(Campaigns.ajaxError.xhr.responseText)}).appendTo(Campaigns.ajaxError.holder.find(".content")))}function d(a){var c=b(a.target);c.is(":checked")?c.closest(".cblock").find(".box-inner").removeClass("cblock-disabled"):c.closest(".cblock").find(".box-inner").addClass("cblock-disabled")}function e(a){var c=b(a.target).closest(".cblock");"yes"==c.find(".item_toggler input:checked").val()?c.find(".item_wrapper").show():c.find(".item_wrapper").hide()}function f(a){var c="SELECT"==a.target.nodeName?b(a.target):b(a.target).find("select"),d=c.closest(".cblock");d.find(".post_types").hide(),d.find(".type-"+c.val()).show()}function g(a){var c=b(a.target),d=c.parent(),e=c.val();"yes"==c.data("box")&&(d=c.closest(".campaign-item"));for(var f=i.length-1;f>=0;f--)e=e.replace(i[f],"http://www.google.com");var g=twttr.txt.getTweetLength(e);d.find(".counter_result strong").html(140-g)}var h=b("#campaigns");if(0===h.length){if(!document.getElementById("view_content_entry_links"))return;h=b("#mainContent").parent()}var Campaigns=a.Campaigns=a.Campaigns||{};Campaigns.wrapper=h,Campaigns.ajaxError={holder:h.find(".ajax_error"),xhr:null};var i=["{url}","{homepage}","{comment_auto_path}","{comment_entry_id_auto_path}","{comment_url_title_auto_path}"];h.delegate(".toggle_enabled","click",d),h.delegate("textarea.tweet_counter","keyup",g),h.delegate(".item_toggler","change",e),h.delegate(".posttype_toggler","change",f),h.delegate(".show_ajax_error","click",c),Campaigns.emptyAjaxError=function(){Campaigns.ajaxError.xhr=null,Campaigns.ajaxError.holder.find(".content").empty(),Campaigns.ajaxError.holder.hide()},Handlebars.registerHelper("compare",function(a,b,c,d){if(arguments.length<3)throw new Error('Handlerbars Helper "compare" needs 2 parameters');void 0===d&&(d=c,c=b,b="===");var e={"==":function(a,b){return a==b},"===":function(a,b){return a===b},"!=":function(a,b){return a!=b},"!==":function(a,b){return a!==b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b},"typeof":function(a,b){return typeof a==b},"%":function(a,b){return a%b===0}};if(!e[b])throw new Error('Handlerbars Helper "compare" doesn\'t know the operator '+b);var f=e[b](a,c);return f?d.fn(this):d.inverse(this)}),Handlebars.registerHelper("everyOther",function(a,b,c){return++a%b?c.inverse(this):c.fn(this)}),Handlebars.registerHelper("equals",function(a,b,c){return a==b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("dropdown",function(a,b,c){var d='<select name="'+a+'">';for(var e in b)if("string"==typeof b[e])d+='<option value="'+e+'" '+(e==c?"selected":"")+">"+b[e]+"</option>";else{d+='<optgroup label="'+e+'">';for(var f in b[e])d+='<option value="'+f+'" '+(f==c?"selected":"")+">"+b[e][f]+"</option>";d+="</optgroup>"}return d+="</select>",new Handlebars.SafeString(d)}),Handlebars.registerHelper("dropdownOptionsArr",function(a,b){if(!a)return"";for(var c="",d=0;d<a.length;d++)c+='<option value="'+a[d].value+'" '+(a[d].value==b?"selected":"")+">"+a[d].label+"</option>";return new Handlebars.SafeString(c)}),Handlebars.registerHelper("equalsInIndex",function(a,b,c,d){var e=!1,f=!0;return"|default"==c.substr(-8)&&(c=c.substr(0,c.length-8)),"undefined"!=typeof a?"undefined"==typeof a[b]?(e=!1,f&&(e=!0)):a[b]==c&&(e=!0):f&&(e=!0),e?d.fn(this):d.inverse(this)})}(window,jQuery),function(a,b){"use strict";function c(){var a=Campaigns.Templates.view_entry_init();n.find(".contents > .heading").after(a),n=n.find(".campaigns"),Campaigns.ajaxError.holder=n.find(".ajax_error"),d(),n.delegate(".boxeslist a","click",k),n.delegate(".send_another","click",i),n.delegate("button","click",function(a){var c=b(a.target);c.attr("href")&&window.open(c.attr("href"),"_blank")})}function d(){Campaigns.emptyAjaxError();var a={};a.ajax_method="getCampaignUi",a.entry_id=Campaigns.ENTRY_ID,EE.CSRF_TOKEN?a.CSRF_TOKEN=EE.CSRF_TOKEN:a.XID=EE.XID,b.ajax({url:Campaigns.ACT_URL,type:"POST",dataType:"json",data:a,success:function(a){return a.success?(o=a,void e()):void n.html(a.errorMsg)},error:function(a){Campaigns.ajaxError.xhr=a,n.find(".loading").replaceWith('<h3>AJAX Error: <a href="#" class="show_ajax_error"><strong>Show</strong></a></h3>')}})}function e(a,b){var c=o;n.find(".innerwrap").replaceWith(Campaigns.Templates.boxes_ui_tabbed(c));for(var d in c.boxes){var e=c.boxes[d];if("undefined"==typeof e.html||b){0===e.campaigns.length&&(e.campaigns=[e.emptyCampaign]);for(var h=0;h<e.campaigns.length;h++)f(e.campaigns[h],e)}}n.find(".boxeslist a:first").trigger("click"),g(n),m()}function f(a,c,d){var e="",f=b("#b_"+c.id).find(".campaigns-list"),g=a;return g.box=c,g.global=o.global,g.scheduleDropdowns=o.schedule,g.deliverHtml=Campaigns.Templates.boxes_ui_deliver(g),g.bottomButtonsHtml=Campaigns.Templates.boxes_ui_bottom_buttons(g),g.serviceLogoUrl=g.global.themeUrl+"/img/services/"+c.service+".png",g.currentHtml=Campaigns.Templates.boxes_ui_current(g),"undefined"==typeof g.showCurrent&&(g.showCurrent=g.id>0?!0:!1),e="email"==c.serviceType?Campaigns.Templates.boxes_email(g):Campaigns.Templates["boxes_"+c.service](g),e=b(e).data("campaign",g),d?e:(f.find(".hide_details").trigger("click"),void f.append(e))}function g(a){a.find(".deliver-toggle").delegate("input","change",l).find("input:checked").trigger("change"),a.find("button.deliver").click(h),a.find("button.delete_item").click(j),a.find(".show_fb_item").click(function(){return b(this).closest(".campaign-item").find(".item_wrapper").toggle(),!1})}function h(a){a.preventDefault(),Campaigns.emptyAjaxError();var c=b(a.target),d=b(a.target).data("deliver"),e=c.closest(".campaign-item"),g=c.closest(".box").find(".errors"),h=e.find(":input").serializeArray();h.push({name:"entry_id",value:Campaigns.ENTRY_ID}),h.push({name:"ajax_method",value:"sendCampaign"}),h.push(EE.CSRF_TOKEN?{name:"CSRF_TOKEN",value:EE.CSRF_TOKEN}:{name:"XID",value:EE.XID}),c.attr("disabled","disabled").addClass("disabled"),g.hide().find("ul").empty(),e.find(".loading-wrapper").find(".loading, .success").hide(),e.find(".loading-"+d).show(),b.ajax({url:Campaigns.ACT_URL,type:"POST",dataType:"json",data:h,success:function(a){if("test"==d&&c.removeAttr("disabled").removeClass("disabled"),e.find(".loading-wrapper").find(".loading, .success").hide(),a.errorMsg)g.show().find("ul").append("<li>"+a.errorMsg+"</li>"),c.removeAttr("disabled").removeClass("disabled");else if(a.errors.length>0){for(var b=0;b<a.errors.length;b++)g.show().find("ul").append("<li>"+a.errors[b].error+"</li>");c.removeAttr("disabled").removeClass("disabled")}else{if(!a.campaign)return void e.find(".success-"+d).show();{var h=a.campaign,i=o.boxes["b_"+h.box_id];f(h,i)}e.remove()}},error:function(a){e.find(".loading-wrapper").find(".loading, .success").hide(),c.removeAttr("disabled").removeClass("disabled"),g.show().find("ul").append('<li>AJAX Error: <a href="#" class="show_ajax_error"><strong>Show</strong></a></li>'),Campaigns.ajaxError.xhr=a}})}function i(a){a.preventDefault(),b(a.target).hide();var c=b(a.target).closest(".campaign-item"),d=c.data("box_id"),e=o.boxes["b_"+d],h=e.emptyCampaign;f(h,e),g(c.closest(".box").find(".campaign-item:last")),m()}function j(a){a.preventDefault();var c=confirm("Are you sure you want to delete this campaign?");if(c){var d=b(a.target).parent(),e=d.closest(".campaign-item"),f=e.data("id");d.find("button").hide(),d.find(".loading").show();var g={};g.ajax_method="deleteCampaignSend",g.id=f,EE.CSRF_TOKEN?g.CSRF_TOKEN=EE.CSRF_TOKEN:g.XID=EE.XID,b.ajax({url:Campaigns.ACT_URL,type:"POST",dataType:"json",data:g,success:function(){e.slideUp(function(){1===e.closest(".campaigns-list").find(".campaign-item").length&&i(a),e.remove(),m()})},error:function(a){Campaigns.ajaxError.xhr=a,d.find(".loading").replaceWith('<span class="right">AJAX Error: <a href="#" class="show_ajax_error"><strong>Show</strong></a></span>')}})}}function k(a){a.preventDefault();var c="SPAN"==a.target.nodeName?b(a.target).parent():b(a.target),d=c.closest("ul");d.find(".selected").removeClass("selected"),c.parent().addClass("selected"),n.find(".boxes").find(".box").hide(),n.find(".boxes").find("#"+c.data("key")).show()}function l(a){var c=b(a.target).val(),d=b(a.target).closest(".box");d.find(".deliver").hide(),d.find(".deliver-"+c).show()}function m(){n.find(".box").each(function(a,c){b(c).find(".campaign-item").each(function(a,c){var d=b(c);d.find("input, textarea, select").each(function(c,e){if(!e.getAttribute("name"))return!1;var f=b(this).attr("name").replace(new RegExp("\\[boxes\\]\\["+d.data("box_id")+"\\]\\[.*?\\]"),"[boxes]["+d.data("box_id")+"]["+(a+1)+"]");b(this).attr("name",f)})})})}if(a.Campaigns&&Campaigns.ENTRY_ID){var n,o;return document.getElementById("view_content_entry_links")&&(n=b("#view_content_entry_links").closest("#mainContent")),0===n.length?!1:void c()}}(window,jQuery);
//# sourceMappingURL=field.min.map