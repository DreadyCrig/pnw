{"version":3,"file":"mcp.min.js","sources":["../../../../sources/js/global.js","../../../../sources/js/mcp/accounts.js","../../../../sources/js/mcp/channels.js","../../../../sources/js/mcp/home.js","../../../../sources/js/mcp/settings.js"],"names":["global","$","showAjaxError","evt","preventDefault","Campaigns","GROUP_ID","ajaxError","holder","show","stop","animate","scrollTop","offset","top","load","contents","find","append","xhr","responseText","appendTo","toggleBoxEnabled","e","target","is","closest","removeClass","addClass","toggleItemPost","parent","val","hide","togglePostTypes","nodeName","tweetCounter","text","data","i","ignoredUrlVars","length","replace","twttr","txt","getTweetLength","html","document","getElementById","wrapper","delegate","emptyAjaxError","empty","Handlebars","registerHelper","left","operator","right","options","arguments","Error","undefined","operators","==","l","r","===","!=","!==","<",">","<=",">=","typeof","%","result","fn","this","inverse","index","amount","scope","a","b","name","collection","currentValue","group","value","SafeString","label","defaultIfUndefined","substr","window","jQuery","testAccounts","block","id","ajax","url","ACT_URL","type","dataType","XID","EE","ajax_method","success","rdata","errorMsg","error","oAuthCallback","originalEvent","addon","vars","key","attr","oauthWindow","close","toggleServices","jsonConfig","parseJSON","config","services","currentSettings","Templates","openOauth","path","getAttribute","open","response","ajaxErrorHolder","stringToSlug","setEvents","getPut","space","trigger","bind","click","alert","openSettings","settingsWrapper","params","base_url","MCP_BASE_URL","channel_id","currentTarget","CSRF_TOKEN","MCP_AJAX_URL","prepData","render","complete","totalData","templates","accounts","settings","boxes","channel_settings_ui","addAccount","deleteBox","holderBoxList","box","account","enabled","defaultBoxSettings","account_id","total","children","width","boxHtml","settings_email","service","settings_global","css","scrollLeft","syncOrderNumbers","fadeOut","remove","each","elem","cblock","findex","felem","openCampaign","cmId","modalWrapper","modal","campaign_id","deleteCampaign","location","reload","toggleUrlShortener"],"mappings":"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","sourcesContent":[";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var holder = $('#campaigns');\n    if (holder.length === 0) {\n        if (document.getElementById('view_content_entry_links')) {\n            holder = $('#mainContent').parent();\n        } else {\n            return;\n        }\n    }\n\n    var Campaigns = global.Campaigns = global.Campaigns || {};\n\n    Campaigns.wrapper = holder;\n    Campaigns.ajaxError = {\n        holder: holder.find('.ajax_error'),\n        xhr: null\n    };\n\n    var ignoredUrlVars = [\n        '{url}',\n        '{homepage}',\n        '{comment_auto_path}',\n        '{comment_entry_id_auto_path}',\n        '{comment_url_title_auto_path}'\n    ];\n\n    holder.delegate('.toggle_enabled', 'click', toggleBoxEnabled);\n    holder.delegate('textarea.tweet_counter', 'keyup', tweetCounter);\n    holder.delegate('.item_toggler', 'change', toggleItemPost);\n    /*\n\n    holder.find('textarea.tweet_counter').trigger('keyup');\n\n\n    */\n\n    holder.delegate('.posttype_toggler', 'change', togglePostTypes);\n\n    // Ajax Error\n    holder.delegate('.show_ajax_error', 'click', showAjaxError);\n\n    // ----------------------------------------------------------------------\n\n    function showAjaxError(evt) {\n        evt.preventDefault();\n\n        if (Campaigns.GROUP_ID > 1) return;\n\n        Campaigns.ajaxError.holder.show();\n\n        $('html, body').stop().animate({\n            scrollTop: Campaigns.ajaxError.holder.offset().top\n        }, 1000);\n\n        $('<iframe id=\"campaigns_error_iframe\" style=\"width:100%;height:300px\"/>').load(function(){\n            $('#campaigns_error_iframe').contents().find('body').append(Campaigns.ajaxError.xhr.responseText);\n        }).appendTo(Campaigns.ajaxError.holder.find('.content'));\n    }\n\n    // ----------------------------------------------------------------------\n\n    Campaigns.emptyAjaxError = function (evt) {\n        Campaigns.ajaxError.xhr = null;\n        Campaigns.ajaxError.holder.find('.content').empty();\n        Campaigns.ajaxError.holder.hide();\n    };\n\n    // ----------------------------------------------------------------------\n\n    function toggleBoxEnabled(e) {\n        var target = $(e.target);\n\n        if (target.is(':checked')) {\n            target.closest('.cblock').find('.box-inner').removeClass('cblock-disabled');\n        } else {\n            target.closest('.cblock').find('.box-inner').addClass('cblock-disabled');\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n    function toggleItemPost(e) {\n        var parent = $(e.target).closest('.cblock');\n\n        if (parent.find('.item_toggler input:checked').val() == 'yes') {\n            parent.find('.item_wrapper').show();\n        } else {\n            parent.find('.item_wrapper').hide();\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n    function togglePostTypes(e) {\n        var target = (e.target.nodeName == 'SELECT') ? $(e.target) : $(e.target).find('select');\n        var parent = target.closest('.cblock');\n        parent.find('.post_types').hide();\n\n        parent.find('.type-'+target.val()).show();\n    }\n\n    // ----------------------------------------------------------------------\n\n    function tweetCounter(e) {\n        var target = $(e.target);\n        var parent = target.parent();\n        var text = target.val();\n\n        if (target.data('box') == 'yes') {\n            parent = target.closest('.campaign-item');\n        }\n\n        for (var i = ignoredUrlVars.length - 1; i >= 0; i--) {\n            text = text.replace(ignoredUrlVars[i], 'http://www.google.com');\n        }\n\n        var length = twttr.txt.getTweetLength(text);\n\n        parent.find('.counter_result strong').html(140-length);\n    }\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('compare', function(left, operator, right, options) {\n        if (arguments.length < 3) {\n          throw new Error('Handlerbars Helper \"compare\" needs 2 parameters');\n        }\n\n        if (options === undefined) {\n          options = right;\n          right = operator;\n          operator = '===';\n        }\n\n        var operators = {\n          '==':     function(l, r) {return l == r; },\n          '===':    function(l, r) {return l === r; },\n          '!=':     function(l, r) {return l != r; },\n          '!==':    function(l, r) {return l !== r; },\n          '<':      function(l, r) {return l < r; },\n          '>':      function(l, r) {return l > r; },\n          '<=':     function(l, r) {return l <= r; },\n          '>=':     function(l, r) {return l >= r; },\n          'typeof': function(l, r) {return typeof l == r; },\n          '%':     function(l, r) {return (l % r) === 0; }\n        };\n\n        if (!operators[operator]) {\n          throw new Error('Handlerbars Helper \"compare\" doesn\\'t know the operator ' + operator);\n        }\n\n        var result = operators[operator](left, right);\n\n        if (result) {\n          return options.fn(this);\n        } else {\n          return options.inverse(this);\n        }\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper(\"everyOther\", function (index, amount, scope) {\n        if ( ++index % amount )\n            return scope.inverse(this);\n        else\n            return scope.fn(this);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper(\"equals\", function (a, b, scope) {\n        if (a == b)\n            return scope.fn(this);\n        else\n            return scope.inverse(this);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('dropdown', function(name, collection, currentValue, options) {\n        //console.log(name, collection, currentValue);\n\n        var html = '<select name=\"'+name+'\">';\n\n        for (var group in collection) {\n            if (typeof collection[group] == 'string') {\n                html += '<option value=\"'+group+'\" '+((group == currentValue) ? 'selected' : '')+'>'+collection[group]+'</option>';\n            } else {\n\n                html += '<optgroup label=\"'+group+'\">';\n\n                for(var value in collection[group]) {\n                    html += '<option value=\"'+value+'\" '+((value == currentValue) ? 'selected' : '')+'>'+collection[group][value]+'</option>';\n                }\n\n                html += '</optgroup>';\n            }\n        }\n\n        html += '</select>';\n        return new Handlebars.SafeString(html);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('dropdownOptionsArr', function(collection, currentValue, options) {\n\n        if (!collection) return '';\n\n        var html = '';\n\n        for (var i = 0; i < collection.length; i++) {\n            html += '<option value=\"'+collection[i].value+'\" '+((collection[i].value == currentValue) ? 'selected' : '')+'>'+collection[i].label+'</option>';\n        }\n\n        return new Handlebars.SafeString(html);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('equalsInIndex', function(collection, index, value, options) {\n        var result = false;\n        //console.log(collection, index, value);\n\n        var defaultIfUndefined = true;\n\n        if (value.substr(-8) == '|default') {\n            value = value.substr(0, value.length - 8);\n        }\n\n        if (typeof collection != 'undefined') {\n            if (typeof collection[index] == 'undefined') {\n                result = false;\n\n                if (defaultIfUndefined) {\n                    result = true;\n                }\n            }\n            else {\n                if (collection[index] == value) result = true;\n            }\n        } else if (defaultIfUndefined) {\n            result = true;\n        }\n\n        if (result) {\n            return options.fn(this);\n        } else {\n            return options.inverse(this);\n        }\n    });\n\n}(window, jQuery));\n\n// ----------------------------------------------------------------------",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    // This should only work on the Accounts Page\n    if (!document.getElementById('accounts_add') && !document.getElementById('accounts')) return;\n    var holder = $('#accounts');\n\n    // Accounts Page\n    if (holder.length > 0) {\n        testAccounts();\n    } else {\n        // Accounts ADD/Update page?\n\n        holder = $('#accounts_add');\n\n        jQuery('.stringtoslug-source').stringToSlug({\n            setEvents: 'keyup keydown blur',\n            getPut: '.stringtoslug-dest',\n            space: '_'\n        });\n\n        $('#accounts_toggle').delegate('input', 'click', toggleServices).find('input:checked').trigger('click');\n\n        holder.delegate('.get_access_code', 'click', openOauth);\n        $(window).bind('message', oAuthCallback);\n        var oauthWindow;\n\n        // Validate form\n        holder.find('.pagebottom button').click(function(){\n            if (!$('#a_label').val()) {\n                alert('Missing label');\n                return false;\n            }\n        });\n    }\n\n    $('body').delegate('.show_ajax_error', 'click', showAjaxError);\n\n    // ----------------------------------------------------------------------\n\n    function testAccounts() {\n        var block = holder.find('.js-not_checked:first');\n        if (block.length === 0) return;\n\n        var id = block.data('id');\n        block.find('.test').html('<div class=\"loading\" style=\"display:block\">testing...</div>');\n        block.removeClass('js-not_checked');\n\n        $.ajax({url: Campaigns.ACT_URL,\n            type: 'POST', dataType: 'json',\n            data: {XID:EE.XID, ajax_method:'testAccount', id:id},\n            success: function(rdata) {\n\n\n                if (rdata.errorMsg) {\n                    block.find('.test-error').html(rdata.errorMsg).show();\n                }\n\n                if (rdata.html) {\n                    block.find('.test-data').html(rdata.html).show();\n                }\n\n                block.find('.test').html(rdata.result);\n\n                testAccounts();\n            },\n            error: function(xhr) {\n                block.data('response', xhr.responseText);\n                block.find('.test').html('AJAX Error: <a href=\"#\" class=\"show_ajax_error\"><strong>Show</strong></a>');\n                testAccounts();\n\n            }\n        });\n    }\n\n    // ----------------------------------------------------------------------\n\n    function oAuthCallback(e) {\n\n        if (!e.originalEvent.data) return;\n        var data = e.originalEvent.data;\n        if (typeof data.addon == 'undefined') return;\n        if (typeof data.vars == 'undefined') return;\n        if (data.addon != 'campaigns') return;\n\n        //console.log(data);\n\n        for (var key in data.vars) {\n            holder.find('.'+key).attr('value', data.vars[key]);\n            //onsole.log('.'+key, holder.find('.'+key));\n        }\n\n        if (oauthWindow) {\n            oauthWindow.close();\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n    function toggleServices(e) {\n        var val = $(e.target).val();\n        var jsonConfig = jQuery.parseJSON(holder.find('.json').html());\n        var html;\n\n        var config = jsonConfig['_global'];\n\n        if (typeof jsonConfig.services[val] != 'undefined') {\n            for (var key in jsonConfig.services[val]) {\n                config[key] = jsonConfig.services[val][key];\n            }\n        }\n\n        for (var key in jsonConfig.currentSettings) {\n            config[key] = jsonConfig.currentSettings[key];\n        }\n\n        if (typeof Campaigns.Templates['accounts_'+val] != 'undefined') {\n            html = Campaigns.Templates['accounts_'+val](config);\n        }\n\n        holder.find('#accounts_holder').html(html);\n    }\n\n    // ----------------------------------------------------------------------\n\n    function openOauth(e) {\n        e.preventDefault();\n\n        var path = e.target.getAttribute('href');\n\n        oauthWindow = window.open(path, 'campaigns_oauth', 'location=0,status=0,width=750,height=600');\n    }\n\n    // ----------------------------------------------------------------------\n\n    function showAjaxError(e) {\n        var response = $(e.target).closest('.cblock').data('response');\n        var ajaxErrorHolder = $('#campaigns .ajax_error');\n        ajaxErrorHolder.show();\n        ajaxErrorHolder.find('.content').empty();\n\n        $('html, body').stop().animate({\n            scrollTop: $('.ajax_error').offset().top\n        }, 1000);\n\n        $('<iframe id=\"campaigns_error_iframe\" style=\"width:100%;height:300px\"/>').load(function(){\n            $('#campaigns_error_iframe').contents().find('body').append(response);\n        }).appendTo(ajaxErrorHolder.find('.content'));\n\n        return false;\n    }\n\n    // ----------------------------------------------------------------------\n\n\n}(window, jQuery));\n\n// ----------------------------------------------------------------------",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    // This should only work on the Accounts Page\n    if (!document.getElementById('campchannels')) return;\n    var holder = $('#campchannels');\n    var settingsWrapper = holder.find('.settingswrapper');\n\n    holder.find('.channel_list').delegate('.channel', 'click', openSettings);\n\n    var totalData;\n    var holderBoxList;\n\n    // ----------------------------------------------------------------------\n\n    function openSettings(evt) {\n        settingsWrapper.find('.loading-empty').hide();\n        settingsWrapper.find('.loading-error').hide();\n        settingsWrapper.find('.loading-settings').show();\n        settingsWrapper.find('.settingsinner').empty();\n        Campaigns.emptyAjaxError();\n\n        var params = {};\n        params.ajax_method = 'getChannelSettings';\n        params.base_url = Campaigns.MCP_BASE_URL;\n        params.channel_id = $(evt.currentTarget).data('id');\n        if (EE.CSRF_TOKEN) params.CSRF_TOKEN = EE.CSRF_TOKEN;\n        else params.XID = EE.XID;\n\n        $.ajax({url: Campaigns.MCP_AJAX_URL,\n            type: 'POST', dataType: 'json', data: params,\n            success: function(rdata) {\n                settingsWrapper.find('.settingsinner').html(rdata.html);\n\n                prepData(rdata);\n                render();\n            },\n            error: function(xhr) {\n                Campaigns.ajaxError.xhr = xhr;\n                settingsWrapper.find('.loading-error').show().html('<h3>AJAX Error: <a href=\"#\" class=\"show_ajax_error\"><strong>Show</strong></a></h3>');\n            },\n            complete: function(xhr, textStatus) {\n                settingsWrapper.find('.loading-settings').hide();\n            }\n        });\n    }\n\n    // ----------------------------------------------------------------------\n\n    function prepData(rdata) {\n        totalData = {};\n        totalData.templates = rdata.templates;\n        totalData.accounts = rdata.accounts;\n        totalData.settings = rdata.settings;\n        totalData.boxes = rdata.boxes;\n    }\n\n    // ----------------------------------------------------------------------\n\n    function render() {\n        settingsWrapper.find('.channelsettingsui').html(Campaigns.Templates.channel_settings_ui(totalData));\n        settingsWrapper.delegate('.accounts li', 'click', addAccount);\n        settingsWrapper.delegate('.deletebox', 'click', deleteBox);\n\n        holderBoxList = settingsWrapper.find('.boxeslist');\n\n        if (totalData.boxes) {\n            for (var i = 0; i < totalData.boxes.length; i++) {\n                addAccount(null, totalData.boxes[i]);\n            }\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n    function addAccount(e, box) {\n        var data = {};\n\n        if (e) {\n            var target = $(e.target);\n            data.account = totalData.accounts['a'+target.data('id')];\n            data.box = {};\n            data.box.label = data.account.label;\n            data.box.enabled = 1;\n            data.box.settings = data.account.defaultBoxSettings;\n        } else {\n            data.account = totalData.accounts['a'+box.account_id];\n            data.box = box;\n        }\n\n        data.settings = totalData.settings;\n        data.templates = totalData.templates;\n\n        var total = holderBoxList.children('.cblock').length;\n        var width = 50 + (total * 310) + 310;\n\n        if (data.account.type == 'email') {\n            data.boxHtml = Campaigns.Templates.settings_email(data);\n        } else {\n            data.boxHtml = Campaigns.Templates['settings_'+data.account.service](data);\n        }\n\n        holderBoxList.find('.empty').hide();\n        holderBoxList.append(Campaigns.Templates.settings_global(data));\n        if (e) holderBoxList.css('width', width+'px').parent().animate({scrollLeft: width}, 800);\n        syncOrderNumbers();\n\n        // Trigger the tweet counter\n        holderBoxList.find('textarea.tweet_counter').trigger('keyup');\n        holderBoxList.find('.item_toggler').trigger('change');\n        holderBoxList.find('.posttype_toggler').trigger('change');\n    }\n\n    // ----------------------------------------------------------------------\n\n    function deleteBox(e) {\n        e.preventDefault();\n\n        $(e.target).closest('.cblock').fadeOut('slow', function(){\n            $(e.target).closest('.cblock').remove();\n        });\n    }\n\n    // ----------------------------------------------------------------------\n\n    function syncOrderNumbers() {\n        // Loop over all Files\n        holderBoxList.children('.cblock').each(function(index, elem){\n            var cblock = $(elem);\n\n            // Find all form inputs\n            cblock.find('input, textarea, select').each(function(findex,felem){\n                if (!felem.getAttribute('name')) return false;\n\n                // Get it's attribute and change it\n                var attr = $(this).attr('name').replace(/\\[boxes\\]\\[.*?\\]/, '[boxes][' + (index+1) + ']');\n                $(this).attr('name', attr);\n            });\n        });\n    }\n\n    // ----------------------------------------------------------------------\n\n\n}(window, jQuery));\n\n// ----------------------------------------------------------------------",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    if (!document.getElementById('campaigns')) return;\n    var holder = $('#campaigns');\n\n    holder.delegate('.open_campaign', 'click', openCampaign);\n    holder.delegate('.delete_campaign a', 'click', deleteCampaign);\n\n\n    // ----------------------------------------------------------------------\n\n    function openCampaign(e) {\n        e.preventDefault();\n        var target = $(e.target);\n        var cmId = target.data('id');\n        var modalWrapper = holder.find('.modalwrapper');\n\n        modalWrapper.data('campaign_id', cmId).modal().find('.modal-body').html('<p>loading...</p>');\n\n        $.ajax({url: Campaigns.ACT_URL,\n            type: 'POST', dataType: 'json',\n            data: {XID:EE.XID, ajax_method:'getCampaignStatsUi', campaign_id:cmId},\n            success: function(rdata) {\n                if (rdata.errorMsg) {\n                    modalWrapper.find('.modal-body').html(rdata.errorMsg);\n                } else {\n                    modalWrapper.find('.modal-body').html(rdata.html);\n                }\n            },\n            error: function(xhr) {\n\n            }\n        });\n\n    }\n\n    // ----------------------------------------------------------------------\n\n    function deleteCampaign(e) {\n        e.preventDefault();\n        var target = $(e.target);\n        var id = holder.find('.modalwrapper').data('campaign_id');\n\n        holder.find('.modalwrapper .delete_campaign a').hide();\n        holder.find('.modalwrapper .delete_campaign .loading').show();\n\n        $.ajax({url: Campaigns.ACT_URL,\n            type: 'POST', dataType: 'json',\n            data: {XID:EE.XID, ajax_method:'delCampaign', campaign_id:id},\n            success: function(rdata) {\n                global.location.reload();\n            },\n            error: function(xhr) {\n                //global.location.reload();\n            }\n        });\n    }\n\n}(window, jQuery));\n\n// ----------------------------------------------------------------------",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    // This should only work on the Accounts Page\n    if (!document.getElementById('settings')) return;\n    var holder = $('#settings');\n\n    holder.find('.urlshort-toggler').click(toggleUrlShortener).find('input:checked').trigger('click');\n\n    // ----------------------------------------------------------------------\n\n    function toggleUrlShortener(evt)\n    {\n        var target = $(evt.target);\n        var val = target.val();\n\n        holder.find('tbody.urlshort').hide();\n        holder.find('tbody.urlshort-'+val).show();\n    }\n\n    // ----------------------------------------------------------------------\n\n\n}(window, jQuery));\n\n// ----------------------------------------------------------------------"]}