!function(a,b){"use strict";function c(a){a.preventDefault(),Campaigns.GROUP_ID>1||(Campaigns.ajaxError.holder.show(),b("html, body").stop().animate({scrollTop:Campaigns.ajaxError.holder.offset().top},1e3),b('<iframe id="campaigns_error_iframe" style="width:100%;height:300px"/>').load(function(){b("#campaigns_error_iframe").contents().find("body").append(Campaigns.ajaxError.xhr.responseText)}).appendTo(Campaigns.ajaxError.holder.find(".content")))}function d(a){var c=b(a.target);c.is(":checked")?c.closest(".cblock").find(".box-inner").removeClass("cblock-disabled"):c.closest(".cblock").find(".box-inner").addClass("cblock-disabled")}function e(a){var c=b(a.target).closest(".cblock");"yes"==c.find(".item_toggler input:checked").val()?c.find(".item_wrapper").show():c.find(".item_wrapper").hide()}function f(a){var c="SELECT"==a.target.nodeName?b(a.target):b(a.target).find("select"),d=c.closest(".cblock");d.find(".post_types").hide(),d.find(".type-"+c.val()).show()}function g(a){var c=b(a.target),d=c.parent(),e=c.val();"yes"==c.data("box")&&(d=c.closest(".campaign-item"));for(var f=i.length-1;f>=0;f--)e=e.replace(i[f],"http://www.google.com");var g=twttr.txt.getTweetLength(e);d.find(".counter_result strong").html(140-g)}var h=b("#campaigns");if(0===h.length){if(!document.getElementById("view_content_entry_links"))return;h=b("#mainContent").parent()}var Campaigns=a.Campaigns=a.Campaigns||{};Campaigns.wrapper=h,Campaigns.ajaxError={holder:h.find(".ajax_error"),xhr:null};var i=["{url}","{homepage}","{comment_auto_path}","{comment_entry_id_auto_path}","{comment_url_title_auto_path}"];h.delegate(".toggle_enabled","click",d),h.delegate("textarea.tweet_counter","keyup",g),h.delegate(".item_toggler","change",e),h.delegate(".posttype_toggler","change",f),h.delegate(".show_ajax_error","click",c),Campaigns.emptyAjaxError=function(){Campaigns.ajaxError.xhr=null,Campaigns.ajaxError.holder.find(".content").empty(),Campaigns.ajaxError.holder.hide()},Handlebars.registerHelper("compare",function(a,b,c,d){if(arguments.length<3)throw new Error('Handlerbars Helper "compare" needs 2 parameters');void 0===d&&(d=c,c=b,b="===");var e={"==":function(a,b){return a==b},"===":function(a,b){return a===b},"!=":function(a,b){return a!=b},"!==":function(a,b){return a!==b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b},"typeof":function(a,b){return typeof a==b},"%":function(a,b){return a%b===0}};if(!e[b])throw new Error('Handlerbars Helper "compare" doesn\'t know the operator '+b);var f=e[b](a,c);return f?d.fn(this):d.inverse(this)}),Handlebars.registerHelper("everyOther",function(a,b,c){return++a%b?c.inverse(this):c.fn(this)}),Handlebars.registerHelper("equals",function(a,b,c){return a==b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("dropdown",function(a,b,c){var d='<select name="'+a+'">';for(var e in b)if("string"==typeof b[e])d+='<option value="'+e+'" '+(e==c?"selected":"")+">"+b[e]+"</option>";else{d+='<optgroup label="'+e+'">';for(var f in b[e])d+='<option value="'+f+'" '+(f==c?"selected":"")+">"+b[e][f]+"</option>";d+="</optgroup>"}return d+="</select>",new Handlebars.SafeString(d)}),Handlebars.registerHelper("dropdownOptionsArr",function(a,b){if(!a)return"";for(var c="",d=0;d<a.length;d++)c+='<option value="'+a[d].value+'" '+(a[d].value==b?"selected":"")+">"+a[d].label+"</option>";return new Handlebars.SafeString(c)}),Handlebars.registerHelper("equalsInIndex",function(a,b,c,d){var e=!1,f=!0;return"|default"==c.substr(-8)&&(c=c.substr(0,c.length-8)),"undefined"!=typeof a?"undefined"==typeof a[b]?(e=!1,f&&(e=!0)):a[b]==c&&(e=!0):f&&(e=!0),e?d.fn(this):d.inverse(this)})}(window,jQuery),function(a,b){"use strict";function c(){var a=h.find(".js-not_checked:first");if(0!==a.length){var d=a.data("id");a.find(".test").html('<div class="loading" style="display:block">testing...</div>'),a.removeClass("js-not_checked"),b.ajax({url:Campaigns.ACT_URL,type:"POST",dataType:"json",data:{XID:EE.XID,ajax_method:"testAccount",id:d},success:function(b){b.errorMsg&&a.find(".test-error").html(b.errorMsg).show(),b.html&&a.find(".test-data").html(b.html).show(),a.find(".test").html(b.result),c()},error:function(b){a.data("response",b.responseText),a.find(".test").html('AJAX Error: <a href="#" class="show_ajax_error"><strong>Show</strong></a>'),c()}})}}function d(a){if(a.originalEvent.data){var b=a.originalEvent.data;if("undefined"!=typeof b.addon&&"undefined"!=typeof b.vars&&"campaigns"==b.addon){for(var c in b.vars)h.find("."+c).attr("value",b.vars[c]);i&&i.close()}}}function e(a){var c,d=b(a.target).val(),e=jQuery.parseJSON(h.find(".json").html()),f=e._global;if("undefined"!=typeof e.services[d])for(var g in e.services[d])f[g]=e.services[d][g];for(var g in e.currentSettings)f[g]=e.currentSettings[g];"undefined"!=typeof Campaigns.Templates["accounts_"+d]&&(c=Campaigns.Templates["accounts_"+d](f)),h.find("#accounts_holder").html(c)}function f(a){a.preventDefault();var b=a.target.getAttribute("href");i=window.open(b,"campaigns_oauth","location=0,status=0,width=750,height=600")}function g(a){var c=b(a.target).closest(".cblock").data("response"),d=b("#campaigns .ajax_error");return d.show(),d.find(".content").empty(),b("html, body").stop().animate({scrollTop:b(".ajax_error").offset().top},1e3),b('<iframe id="campaigns_error_iframe" style="width:100%;height:300px"/>').load(function(){b("#campaigns_error_iframe").contents().find("body").append(c)}).appendTo(d.find(".content")),!1}if(document.getElementById("accounts_add")||document.getElementById("accounts")){var h=b("#accounts");if(h.length>0)c();else{h=b("#accounts_add"),jQuery(".stringtoslug-source").stringToSlug({setEvents:"keyup keydown blur",getPut:".stringtoslug-dest",space:"_"}),b("#accounts_toggle").delegate("input","click",e).find("input:checked").trigger("click"),h.delegate(".get_access_code","click",f),b(window).bind("message",d);var i;h.find(".pagebottom button").click(function(){return b("#a_label").val()?void 0:(alert("Missing label"),!1)})}b("body").delegate(".show_ajax_error","click",g)}}(window,jQuery),function(a,b){"use strict";function c(a){j.find(".loading-empty").hide(),j.find(".loading-error").hide(),j.find(".loading-settings").show(),j.find(".settingsinner").empty(),Campaigns.emptyAjaxError();var c={};c.ajax_method="getChannelSettings",c.base_url=Campaigns.MCP_BASE_URL,c.channel_id=b(a.currentTarget).data("id"),EE.CSRF_TOKEN?c.CSRF_TOKEN=EE.CSRF_TOKEN:c.XID=EE.XID,b.ajax({url:Campaigns.MCP_AJAX_URL,type:"POST",dataType:"json",data:c,success:function(a){j.find(".settingsinner").html(a.html),d(a),e()},error:function(a){Campaigns.ajaxError.xhr=a,j.find(".loading-error").show().html('<h3>AJAX Error: <a href="#" class="show_ajax_error"><strong>Show</strong></a></h3>')},complete:function(){j.find(".loading-settings").hide()}})}function d(a){k={},k.templates=a.templates,k.accounts=a.accounts,k.settings=a.settings,k.boxes=a.boxes}function e(){if(j.find(".channelsettingsui").html(Campaigns.Templates.channel_settings_ui(k)),j.delegate(".accounts li","click",f),j.delegate(".deletebox","click",g),l=j.find(".boxeslist"),k.boxes)for(var a=0;a<k.boxes.length;a++)f(null,k.boxes[a])}function f(a,c){var d={};if(a){var e=b(a.target);d.account=k.accounts["a"+e.data("id")],d.box={},d.box.label=d.account.label,d.box.enabled=1,d.box.settings=d.account.defaultBoxSettings}else d.account=k.accounts["a"+c.account_id],d.box=c;d.settings=k.settings,d.templates=k.templates;var f=l.children(".cblock").length,g=50+310*f+310;d.boxHtml="email"==d.account.type?Campaigns.Templates.settings_email(d):Campaigns.Templates["settings_"+d.account.service](d),l.find(".empty").hide(),l.append(Campaigns.Templates.settings_global(d)),a&&l.css("width",g+"px").parent().animate({scrollLeft:g},800),h(),l.find("textarea.tweet_counter").trigger("keyup"),l.find(".item_toggler").trigger("change"),l.find(".posttype_toggler").trigger("change")}function g(a){a.preventDefault(),b(a.target).closest(".cblock").fadeOut("slow",function(){b(a.target).closest(".cblock").remove()})}function h(){l.children(".cblock").each(function(a,c){var d=b(c);d.find("input, textarea, select").each(function(c,d){if(!d.getAttribute("name"))return!1;var e=b(this).attr("name").replace(/\[boxes\]\[.*?\]/,"[boxes]["+(a+1)+"]");b(this).attr("name",e)})})}if(document.getElementById("campchannels")){var i=b("#campchannels"),j=i.find(".settingswrapper");i.find(".channel_list").delegate(".channel","click",c);var k,l}}(window,jQuery),function(a,b){"use strict";function c(a){a.preventDefault();var c=b(a.target),d=c.data("id"),f=e.find(".modalwrapper");f.data("campaign_id",d).modal().find(".modal-body").html("<p>loading...</p>"),b.ajax({url:Campaigns.ACT_URL,type:"POST",dataType:"json",data:{XID:EE.XID,ajax_method:"getCampaignStatsUi",campaign_id:d},success:function(a){f.find(".modal-body").html(a.errorMsg?a.errorMsg:a.html)},error:function(){}})}function d(c){c.preventDefault();var d=(b(c.target),e.find(".modalwrapper").data("campaign_id"));e.find(".modalwrapper .delete_campaign a").hide(),e.find(".modalwrapper .delete_campaign .loading").show(),b.ajax({url:Campaigns.ACT_URL,type:"POST",dataType:"json",data:{XID:EE.XID,ajax_method:"delCampaign",campaign_id:d},success:function(){a.location.reload()},error:function(){}})}if(document.getElementById("campaigns")){var e=b("#campaigns");e.delegate(".open_campaign","click",c),e.delegate(".delete_campaign a","click",d)}}(window,jQuery),function(a,b){"use strict";function c(a){var c=b(a.target),e=c.val();d.find("tbody.urlshort").hide(),d.find("tbody.urlshort-"+e).show()}if(document.getElementById("settings")){var d=b("#settings");d.find(".urlshort-toggler").click(c).find("input:checked").trigger("click")}}(window,jQuery);
//# sourceMappingURL=mcp.min.map