{"version":3,"file":"field.min.js","sources":["../../../../sources/js/global.js","../../../../sources/js/field/view_entry.js"],"names":["global","$","showAjaxError","evt","preventDefault","Campaigns","GROUP_ID","ajaxError","holder","show","stop","animate","scrollTop","offset","top","load","contents","find","append","xhr","responseText","appendTo","toggleBoxEnabled","e","target","is","closest","removeClass","addClass","toggleItemPost","parent","val","hide","togglePostTypes","nodeName","tweetCounter","text","data","i","ignoredUrlVars","length","replace","twttr","txt","getTweetLength","html","document","getElementById","wrapper","delegate","emptyAjaxError","empty","Handlebars","registerHelper","left","operator","right","options","arguments","Error","undefined","operators","==","l","r","===","!=","!==","<",">","<=",">=","typeof","%","result","fn","this","inverse","index","amount","scope","a","b","name","collection","currentValue","group","value","SafeString","label","defaultIfUndefined","substr","window","jQuery","initViewEntry","startHtml","Templates","view_entry_init","after","getCampaignData","toggleBox","sendAnotherCampaign","attr","open","params","ajax_method","entry_id","ENTRY_ID","EE","CSRF_TOKEN","XID","ajax","url","ACT_URL","type","dataType","success","rdata","campaignUiJson","openCampaign","errorMsg","error","replaceWith","forceRender","boxes_ui_tabbed","boxes","box","campaigns","emptyCampaign","ii","addCampaign","trigger","bindCampaignItemEvents","syncOrderNumbers","campaign","returnHtml","boxHolder","id","cm","scheduleDropdowns","schedule","deliverHtml","boxes_ui_deliver","bottomButtonsHtml","boxes_ui_bottom_buttons","serviceLogoUrl","themeUrl","service","currentHtml","boxes_ui_current","showCurrent","serviceType","boxes_email","deliveryToggle","click","sendCampaign","deleteCampaign","toggle","deliverType","campaignHolder","errorHolder","serializeArray","push","removeAttr","errors","box_id","remove","boxId","resp","confirm","campaignItem","slideUp","each","ee","elem","cblock","findex","felem","getAttribute","RegExp"],"mappings":"CAAE,SAASA,EAAQC,GAEf,YA4CA,SAASC,GAAcC,GACnBA,EAAIC,iBAEAC,UAAUC,SAAW,IAEzBD,UAAUE,UAAUC,OAAOC,OAE3BR,EAAE,cAAcS,OAAOC,SACnBC,UAAWP,UAAUE,UAAUC,OAAOK,SAASC,KAChD,KAEHb,EAAE,yEAAyEc,KAAK,WAC5Ed,EAAE,2BAA2Be,WAAWC,KAAK,QAAQC,OAAOb,UAAUE,UAAUY,IAAIC,gBACrFC,SAAShB,UAAUE,UAAUC,OAAOS,KAAK,cAahD,QAASK,GAAiBC,GACtB,GAAIC,GAASvB,EAAEsB,EAAEC,OAEbA,GAAOC,GAAG,YACVD,EAAOE,QAAQ,WAAWT,KAAK,cAAcU,YAAY,mBAEzDH,EAAOE,QAAQ,WAAWT,KAAK,cAAcW,SAAS,mBAM9D,QAASC,GAAeN,GACpB,GAAIO,GAAS7B,EAAEsB,EAAEC,QAAQE,QAAQ,UAEuB,QAApDI,EAAOb,KAAK,+BAA+Bc,MAC3CD,EAAOb,KAAK,iBAAiBR,OAE7BqB,EAAOb,KAAK,iBAAiBe,OAMrC,QAASC,GAAgBV,GACrB,GAAIC,GAA+B,UAArBD,EAAEC,OAAOU,SAAwBjC,EAAEsB,EAAEC,QAAUvB,EAAEsB,EAAEC,QAAQP,KAAK,UAC1Ea,EAASN,EAAOE,QAAQ,UAC5BI,GAAOb,KAAK,eAAee,OAE3BF,EAAOb,KAAK,SAASO,EAAOO,OAAOtB,OAKvC,QAAS0B,GAAaZ,GAClB,GAAIC,GAASvB,EAAEsB,EAAEC,QACbM,EAASN,EAAOM,SAChBM,EAAOZ,EAAOO,KAEQ,QAAtBP,EAAOa,KAAK,SACZP,EAASN,EAAOE,QAAQ,kBAG5B,KAAK,GAAIY,GAAIC,EAAeC,OAAS,EAAGF,GAAK,EAAGA,IAC5CF,EAAOA,EAAKK,QAAQF,EAAeD,GAAI,wBAG3C,IAAIE,GAASE,MAAMC,IAAIC,eAAeR,EAEtCN,GAAOb,KAAK,0BAA0B4B,KAAK,IAAIL,GArHnD,GAAIhC,GAASP,EAAE,aACf,IAAsB,IAAlBO,EAAOgC,OAAc,CACrB,IAAIM,SAASC,eAAe,4BAGxB,MAFAvC,GAASP,EAAE,gBAAgB6B,SAMnC,GAAIzB,WAAYL,EAAOK,UAAYL,EAAOK,aAE1CA,WAAU2C,QAAUxC,EACpBH,UAAUE,WACNC,OAAQA,EAAOS,KAAK,eACpBE,IAAK,KAGT,IAAIoB,IACA,QACA,aACA,sBACA,+BACA,gCAGJ/B,GAAOyC,SAAS,kBAAmB,QAAS3B,GAC5Cd,EAAOyC,SAAS,yBAA0B,QAASd,GACnD3B,EAAOyC,SAAS,gBAAiB,SAAUpB,GAQ3CrB,EAAOyC,SAAS,oBAAqB,SAAUhB,GAG/CzB,EAAOyC,SAAS,mBAAoB,QAAS/C,GAsB7CG,UAAU6C,eAAiB,WACvB7C,UAAUE,UAAUY,IAAM,KAC1Bd,UAAUE,UAAUC,OAAOS,KAAK,YAAYkC,QAC5C9C,UAAUE,UAAUC,OAAOwB,QA2D/BoB,WAAWC,eAAe,UAAW,SAASC,EAAMC,EAAUC,EAAOC,GACjE,GAAIC,UAAUlB,OAAS,EACrB,KAAM,IAAImB,OAAM,kDAGFC,UAAZH,IACFA,EAAUD,EACVA,EAAQD,EACRA,EAAW,MAGb,IAAIM,IACFC,KAAU,SAASC,EAAGC,GAAI,MAAOD,IAAKC,GACtCC,MAAU,SAASF,EAAGC,GAAI,MAAOD,KAAMC,GACvCE,KAAU,SAASH,EAAGC,GAAI,MAAOD,IAAKC,GACtCG,MAAU,SAASJ,EAAGC,GAAI,MAAOD,KAAMC,GACvCI,IAAU,SAASL,EAAGC,GAAI,MAAWA,GAAJD,GACjCM,IAAU,SAASN,EAAGC,GAAI,MAAOD,GAAIC,GACrCM,KAAU,SAASP,EAAGC,GAAI,MAAYA,IAALD,GACjCQ,KAAU,SAASR,EAAGC,GAAI,MAAOD,IAAKC,GACtCQ,SAAU,SAAST,EAAGC,GAAI,aAAcD,IAAKC,GAC7CS,IAAS,SAASV,EAAGC,GAAI,MAAQD,GAAIC,IAAO,GAG9C,KAAKH,EAAUN,GACb,KAAM,IAAII,OAAM,2DAA6DJ,EAG/E,IAAImB,GAASb,EAAUN,GAAUD,EAAME,EAEvC,OAAIkB,GACKjB,EAAQkB,GAAGC,MAEXnB,EAAQoB,QAAQD,QAM7BxB,WAAWC,eAAe,aAAc,SAAUyB,EAAOC,EAAQC,GAC7D,QAAOF,EAAQC,EACJC,EAAMH,QAAQD,MAEdI,EAAML,GAAGC,QAKxBxB,WAAWC,eAAe,SAAU,SAAU4B,EAAGC,EAAGF,GAChD,MAAIC,IAAKC,EACEF,EAAML,GAAGC,MAETI,EAAMH,QAAQD,QAK7BxB,WAAWC,eAAe,WAAY,SAAS8B,EAAMC,EAAYC,GAG7D,GAAIxC,GAAO,iBAAiBsC,EAAK,IAEjC,KAAK,GAAIG,KAASF,GACd,GAAgC,gBAArBA,GAAWE,GAClBzC,GAAQ,kBAAkByC,EAAM,MAAOA,GAASD,EAAgB,WAAa,IAAI,IAAID,EAAWE,GAAO,gBACpG,CAEHzC,GAAQ,oBAAoByC,EAAM,IAElC,KAAI,GAAIC,KAASH,GAAWE,GACxBzC,GAAQ,kBAAkB0C,EAAM,MAAOA,GAASF,EAAgB,WAAa,IAAI,IAAID,EAAWE,GAAOC,GAAO,WAGlH1C,IAAQ,cAKhB,MADAA,IAAQ,YACD,GAAIO,YAAWoC,WAAW3C,KAKrCO,WAAWC,eAAe,qBAAsB,SAAS+B,EAAYC,GAEjE,IAAKD,EAAY,MAAO,EAIxB,KAAK,GAFDvC,GAAO,GAEFP,EAAI,EAAGA,EAAI8C,EAAW5C,OAAQF,IACnCO,GAAQ,kBAAkBuC,EAAW9C,GAAGiD,MAAM,MAAOH,EAAW9C,GAAGiD,OAASF,EAAgB,WAAa,IAAI,IAAID,EAAW9C,GAAGmD,MAAM,WAGzI,OAAO,IAAIrC,YAAWoC,WAAW3C,KAKrCO,WAAWC,eAAe,gBAAiB,SAAS+B,EAAYN,EAAOS,EAAO9B,GAC1E,GAAIiB,IAAS,EAGTgB,GAAqB,CAqBzB,OAnBwB,YAApBH,EAAMI,OAAO,MACbJ,EAAQA,EAAMI,OAAO,EAAGJ,EAAM/C,OAAS,IAGlB,mBAAd4C,GACyB,mBAArBA,GAAWN,IAClBJ,GAAS,EAELgB,IACAhB,GAAS,IAITU,EAAWN,IAAUS,IAAOb,GAAS,GAEtCgB,IACPhB,GAAS,GAGTA,EACOjB,EAAQkB,GAAGC,MAEXnB,EAAQoB,QAAQD,SAIjCgB,OAAQC,QChQR,SAAS7F,EAAQC,GAEf,YAqBA,SAAS6F,KAGL,GAAIC,GAAY1F,UAAU2F,UAAUC,iBACpCzF,GAAOS,KAAK,wBAAwBiF,MAAMH,GAG1CvF,EAASA,EAAOS,KAAK,cACrBZ,UAAUE,UAAUC,OAASA,EAAOS,KAAK,eAGzCkF,IAGA3F,EAAOyC,SAAS,eAAgB,QAASmD,GACzC5F,EAAOyC,SAAS,gBAAiB,QAASoD,GAE1C7F,EAAOyC,SAAS,SAAU,QAAS,SAAS9C,GACxC,GAAIqB,GAASvB,EAAEE,EAAIqB,OAEfA,GAAO8E,KAAK,SACZV,OAAOW,KAAK/E,EAAO8E,KAAK,QAAS,YAc7C,QAASH,KACL9F,UAAU6C,gBAEV,IAAIsD,KACJA,GAAOC,YAAc,gBACrBD,EAAOE,SAAWrG,UAAUsG,SACxBC,GAAGC,WAAYL,EAAOK,WAAaD,GAAGC,WACrCL,EAAOM,IAAMF,GAAGE,IAErB7G,EAAE8G,MAAMC,IAAK3G,UAAU4G,QACnBC,KAAM,OAAQC,SAAU,OAAQ9E,KAAMmE,EACtCY,QAAS,SAASC,GACd,MAAKA,GAAMD,SAIXE,EAAiBD,MACjBE,UAJI/G,GAAOqC,KAAKwE,EAAMG,WAM1BC,MAAO,SAAStG,GACZd,UAAUE,UAAUY,IAAMA,EAC1BX,EAAOS,KAAK,YAAYyG,YAAY,yFAOhD,QAASH,GAAahG,EAAGoG,GACrB,GAAIN,GAAQC,CAEZ9G,GAAOS,KAAK,cAAcyG,YAAYrH,UAAU2F,UAAU4B,gBAAgBP,GAG1E,KAAK,GAAI/E,KAAK+E,GAAMQ,MAAO,CAGvB,GAAIC,GAAMT,EAAMQ,MAAMvF,EAGtB,IAAuB,mBAAZwF,GAAIjF,MAAwB8E,EAAvC,CAG6B,IAAzBG,EAAIC,UAAUvF,SACdsF,EAAIC,WAAaD,EAAIE,eAIzB,KAAK,GAAIC,GAAK,EAAGA,EAAKH,EAAIC,UAAUvF,OAAQyF,IACxCC,EAAYJ,EAAIC,UAAUE,GAAKH,IAKvCtH,EAAOS,KAAK,sBAAsBkH,QAAQ,SAE1CC,EAAuB5H,GACvB6H,IAKJ,QAASH,GAAYI,EAAUR,EAAKS,GAChC,GAAI1F,GAAO,GACP2F,EAAYvI,EAAE,MAAM6H,EAAIW,IAAIxH,KAAK,mBACjCyH,EAAKJ,CAqBT,OApBAI,GAAGZ,IAAMA,EACTY,EAAG1I,OAASsH,EAAetH,OAC3B0I,EAAGC,kBAAoBrB,EAAesB,SACtCF,EAAGG,YAAcxI,UAAU2F,UAAU8C,iBAAiBJ,GACtDA,EAAGK,kBAAoB1I,UAAU2F,UAAUgD,wBAAwBN,GACnEA,EAAGO,eAAiBP,EAAG1I,OAAOkJ,SAAW,iBAAmBpB,EAAIqB,QAAU,OAC1ET,EAAGU,YAAc/I,UAAU2F,UAAUqD,iBAAiBX,GAEzB,mBAAlBA,GAAGY,cACVZ,EAAGY,YAAeZ,EAAGD,GAAK,GAAK,GAAO,GAItC5F,EADmB,SAAnBiF,EAAIyB,YACGlJ,UAAU2F,UAAUwD,YAAYd,GAEhCrI,UAAU2F,UAAU,SAAS8B,EAAIqB,SAAST,GAGrD7F,EAAO5C,EAAE4C,GAAMR,KAAK,WAAYqG,GAE5BH,EAAmB1F,GAEvB2F,EAAUvH,KAAK,iBAAiBkH,QAAQ,aACxCK,GAAUtH,OAAO2B,IAKrB,QAASuF,GAAuB5H,GAE5BA,EAAOS,KAAK,mBAAmBgC,SAAS,QAAS,SAAUwG,GAAgBxI,KAAK,iBAAiBkH,QAAQ,UACzG3H,EAAOS,KAAK,kBAAkByI,MAAMC,GACpCnJ,EAAOS,KAAK,sBAAsByI,MAAME,GAKxCpJ,EAAOS,KAAK,iBAAiByI,MAAM,WAE/B,MADAzJ,GAAE2E,MAAMlD,QAAQ,kBAAkBT,KAAK,iBAAiB4I,UACjD,IAOf,QAASF,GAAapI,GAClBA,EAAEnB,iBACFC,UAAU6C,gBAEV,IAAI1B,GAASvB,EAAEsB,EAAEC,QACbsI,EAAc7J,EAAEsB,EAAEC,QAAQa,KAAK,WAC/B0H,EAAiBvI,EAAOE,QAAQ,kBAChCsI,EAAcxI,EAAOE,QAAQ,QAAQT,KAAK,WAC1CuF,EAASuD,EAAe9I,KAAK,UAAUgJ,gBAC3CzD,GAAO0D,MAAM/E,KAAK,WAAYI,MAAMlF,UAAUsG,WAC9CH,EAAO0D,MAAM/E,KAAK,cAAeI,MAAM,iBAEpBiB,EAAO0D,KAAtBtD,GAAGC,YAAyB1B,KAAM,aAAcI,MAAOqB,GAAGC,aAC5C1B,KAAM,MAAOI,MAAOqB,GAAGE,MAEzCtF,EAAO8E,KAAK,WAAY,YAAY1E,SAAS,YAE7CoI,EAAYhI,OAAOf,KAAK,MAAMkC,QAC9B4G,EAAe9I,KAAK,oBAAoBA,KAAK,sBAAsBe,OACnE+H,EAAe9I,KAAK,YAAY6I,GAAarJ,OAG7CR,EAAE8G,MAAMC,IAAK3G,UAAU4G,QACnBC,KAAM,OAAQC,SAAU,OACxB9E,KAAMmE,EACNY,QAAS,SAASC,GAQd,GANmB,QAAfyC,GACAtI,EAAO2I,WAAW,YAAYxI,YAAY,YAG9CoI,EAAe9I,KAAK,oBAAoBA,KAAK,sBAAsBe,OAE/DqF,EAAMG,SACNwC,EAAYvJ,OAAOQ,KAAK,MAAMC,OAAO,OAAOmG,EAAMG,SAAS,SAC3DhG,EAAO2I,WAAW,YAAYxI,YAAY,gBAEzC,IAAI0F,EAAM+C,OAAO5H,OAAS,EAAG,CAC9B,IAAK,GAAIF,GAAI,EAAGA,EAAI+E,EAAM+C,OAAO5H,OAAQF,IACrC0H,EAAYvJ,OAAOQ,KAAK,MAAMC,OAAO,OAAOmG,EAAM+C,OAAO9H,GAAGmF,MAAM,QAGtEjG,GAAO2I,WAAW,YAAYxI,YAAY,gBACvC,CAEH,IAAK0F,EAAMiB,SAEP,WADAyB,GAAe9I,KAAK,YAAY6I,GAAarJ,MAIjD,EAAA,GAAI6H,GAAWjB,EAAMiB,SACjBR,EAAMR,EAAeO,MAAM,KAAKS,EAAS+B,OAClCnC,GAAYI,EAAUR,GACjCiC,EAAeO,WAGvB7C,MAAO,SAAStG,GACZ4I,EAAe9I,KAAK,oBAAoBA,KAAK,sBAAsBe,OACnER,EAAO2I,WAAW,YAAYxI,YAAY,YAC1CqI,EAAYvJ,OAAOQ,KAAK,MAAMC,OAAO,sFACrCb,UAAUE,UAAUY,IAAMA,KAQtC,QAASkF,GAAoB9E,GACzBA,EAAEnB,iBAEFH,EAAEsB,EAAEC,QAAQQ,MAEZ,IAAIF,GAAS7B,EAAEsB,EAAEC,QAAQE,QAAQ,kBAC7B6I,EAAQzI,EAAOO,KAAK,UACpByF,EAAMR,EAAeO,MAAM,KAAK0C,GAChCjC,EAAWR,EAAIE,aACnBE,GAAYI,EAAUR,GAEtBM,EAAuBtG,EAAOJ,QAAQ,QAAQT,KAAK,wBACnDoH,IAKJ,QAASuB,GAAezJ,GACpBA,EAAIC,gBACJ,IAAIoK,GAAOC,QAAQ,iDACnB,IAAKD,EAAL,CAEA,GAAI1I,GAAS7B,EAAEE,EAAIqB,QAAQM,SACvB4I,EAAe5I,EAAOJ,QAAQ,kBAC9B+G,EAAKiC,EAAarI,KAAK,KAE3BP,GAAOb,KAAK,UAAUe,OACtBF,EAAOb,KAAK,YAAYR,MAExB,IAAI+F,KACJA,GAAOC,YAAc,qBACrBD,EAAOiC,GAAKA,EACR7B,GAAGC,WAAYL,EAAOK,WAAaD,GAAGC,WACrCL,EAAOM,IAAMF,GAAGE,IAErB7G,EAAE8G,MAAMC,IAAK3G,UAAU4G,QACnBC,KAAM,OAAQC,SAAU,OAAQ9E,KAAMmE,EACtCY,QAAS,WACLsD,EAAaC,QAAQ,WAC6D,IAA1ED,EAAahJ,QAAQ,mBAAmBT,KAAK,kBAAkBuB,QAC/D6D,EAAoBlG,GAGxBuK,EAAaJ,SACbjC,OAGRZ,MAAO,SAAStG,GACZd,UAAUE,UAAUY,IAAMA,EAC1BW,EAAOb,KAAK,YAAYyG,YAAY,4GAQhD,QAAStB,GAAUjG,GACfA,EAAIC,gBAEJ,IAAIoB,GAAiC,QAAvBrB,EAAIqB,OAAOU,SAAsBjC,EAAEE,EAAIqB,QAAQM,SAAW7B,EAAEE,EAAIqB,QAC1EM,EAASN,EAAOE,QAAQ,KAE5BI,GAAOb,KAAK,aAAaU,YAAY,YACrCH,EAAOM,SAASF,SAAS,YAEzBpB,EAAOS,KAAK,UAAUA,KAAK,QAAQe,OACnCxB,EAAOS,KAAK,UAAUA,KAAK,IAAIO,EAAOa,KAAK,QAAQ5B,OAKvD,QAASgJ,GAAelI,GACpB,GAAIQ,GAAM9B,EAAEsB,EAAEC,QAAQO,MAClBD,EAAS7B,EAAEsB,EAAEC,QAAQE,QAAQ,OACjCI,GAAOb,KAAK,YAAYe,OACxBF,EAAOb,KAAK,YAAYc,GAAKtB,OAKjC,QAAS4H,KAGL7H,EAAOS,KAAK,QAAQ2J,KAAK,SAAS3C,EAAI4C,GAClC5K,EAAE4K,GAAI5J,KAAK,kBAAkB2J,KAAK,SAAS9F,EAAOgG,GAC9C,GAAIC,GAAS9K,EAAE6K,EAGfC,GAAO9J,KAAK,2BAA2B2J,KAAK,SAASI,EAAOC,GACxD,IAAKA,EAAMC,aAAa,QAAS,OAAO,CAGxC,IAAI5E,GAAOrG,EAAE2E,MAAM0B,KAAK,QAAQ7D,QAAQ,GAAI0I,QAAO,iBAAiBJ,EAAO1I,KAAK,UAAU,gBAAiB,WAAW0I,EAAO1I,KAAK,UAAU,MAAQyC,EAAM,GAAK,IAC/J7E,GAAE2E,MAAM0B,KAAK,OAAQA,SAxUrC,GAAKtG,EAAOK,WACPA,UAAUsG,SAAf,CAEA,GAAInG,GACA8G,CAQJ,OALIxE,UAASC,eAAe,8BACxBvC,EAASP,EAAE,6BAA6ByB,QAAQ,iBAI9B,IAAlBlB,EAAOgC,QAAqB,MAGhCsD,OA0XFF,OAAQC","sourcesContent":[";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var holder = $('#campaigns');\n    if (holder.length === 0) {\n        if (document.getElementById('view_content_entry_links')) {\n            holder = $('#mainContent').parent();\n        } else {\n            return;\n        }\n    }\n\n    var Campaigns = global.Campaigns = global.Campaigns || {};\n\n    Campaigns.wrapper = holder;\n    Campaigns.ajaxError = {\n        holder: holder.find('.ajax_error'),\n        xhr: null\n    };\n\n    var ignoredUrlVars = [\n        '{url}',\n        '{homepage}',\n        '{comment_auto_path}',\n        '{comment_entry_id_auto_path}',\n        '{comment_url_title_auto_path}'\n    ];\n\n    holder.delegate('.toggle_enabled', 'click', toggleBoxEnabled);\n    holder.delegate('textarea.tweet_counter', 'keyup', tweetCounter);\n    holder.delegate('.item_toggler', 'change', toggleItemPost);\n    /*\n\n    holder.find('textarea.tweet_counter').trigger('keyup');\n\n\n    */\n\n    holder.delegate('.posttype_toggler', 'change', togglePostTypes);\n\n    // Ajax Error\n    holder.delegate('.show_ajax_error', 'click', showAjaxError);\n\n    // ----------------------------------------------------------------------\n\n    function showAjaxError(evt) {\n        evt.preventDefault();\n\n        if (Campaigns.GROUP_ID > 1) return;\n\n        Campaigns.ajaxError.holder.show();\n\n        $('html, body').stop().animate({\n            scrollTop: Campaigns.ajaxError.holder.offset().top\n        }, 1000);\n\n        $('<iframe id=\"campaigns_error_iframe\" style=\"width:100%;height:300px\"/>').load(function(){\n            $('#campaigns_error_iframe').contents().find('body').append(Campaigns.ajaxError.xhr.responseText);\n        }).appendTo(Campaigns.ajaxError.holder.find('.content'));\n    }\n\n    // ----------------------------------------------------------------------\n\n    Campaigns.emptyAjaxError = function (evt) {\n        Campaigns.ajaxError.xhr = null;\n        Campaigns.ajaxError.holder.find('.content').empty();\n        Campaigns.ajaxError.holder.hide();\n    };\n\n    // ----------------------------------------------------------------------\n\n    function toggleBoxEnabled(e) {\n        var target = $(e.target);\n\n        if (target.is(':checked')) {\n            target.closest('.cblock').find('.box-inner').removeClass('cblock-disabled');\n        } else {\n            target.closest('.cblock').find('.box-inner').addClass('cblock-disabled');\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n    function toggleItemPost(e) {\n        var parent = $(e.target).closest('.cblock');\n\n        if (parent.find('.item_toggler input:checked').val() == 'yes') {\n            parent.find('.item_wrapper').show();\n        } else {\n            parent.find('.item_wrapper').hide();\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n    function togglePostTypes(e) {\n        var target = (e.target.nodeName == 'SELECT') ? $(e.target) : $(e.target).find('select');\n        var parent = target.closest('.cblock');\n        parent.find('.post_types').hide();\n\n        parent.find('.type-'+target.val()).show();\n    }\n\n    // ----------------------------------------------------------------------\n\n    function tweetCounter(e) {\n        var target = $(e.target);\n        var parent = target.parent();\n        var text = target.val();\n\n        if (target.data('box') == 'yes') {\n            parent = target.closest('.campaign-item');\n        }\n\n        for (var i = ignoredUrlVars.length - 1; i >= 0; i--) {\n            text = text.replace(ignoredUrlVars[i], 'http://www.google.com');\n        }\n\n        var length = twttr.txt.getTweetLength(text);\n\n        parent.find('.counter_result strong').html(140-length);\n    }\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('compare', function(left, operator, right, options) {\n        if (arguments.length < 3) {\n          throw new Error('Handlerbars Helper \"compare\" needs 2 parameters');\n        }\n\n        if (options === undefined) {\n          options = right;\n          right = operator;\n          operator = '===';\n        }\n\n        var operators = {\n          '==':     function(l, r) {return l == r; },\n          '===':    function(l, r) {return l === r; },\n          '!=':     function(l, r) {return l != r; },\n          '!==':    function(l, r) {return l !== r; },\n          '<':      function(l, r) {return l < r; },\n          '>':      function(l, r) {return l > r; },\n          '<=':     function(l, r) {return l <= r; },\n          '>=':     function(l, r) {return l >= r; },\n          'typeof': function(l, r) {return typeof l == r; },\n          '%':     function(l, r) {return (l % r) === 0; }\n        };\n\n        if (!operators[operator]) {\n          throw new Error('Handlerbars Helper \"compare\" doesn\\'t know the operator ' + operator);\n        }\n\n        var result = operators[operator](left, right);\n\n        if (result) {\n          return options.fn(this);\n        } else {\n          return options.inverse(this);\n        }\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper(\"everyOther\", function (index, amount, scope) {\n        if ( ++index % amount )\n            return scope.inverse(this);\n        else\n            return scope.fn(this);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper(\"equals\", function (a, b, scope) {\n        if (a == b)\n            return scope.fn(this);\n        else\n            return scope.inverse(this);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('dropdown', function(name, collection, currentValue, options) {\n        //console.log(name, collection, currentValue);\n\n        var html = '<select name=\"'+name+'\">';\n\n        for (var group in collection) {\n            if (typeof collection[group] == 'string') {\n                html += '<option value=\"'+group+'\" '+((group == currentValue) ? 'selected' : '')+'>'+collection[group]+'</option>';\n            } else {\n\n                html += '<optgroup label=\"'+group+'\">';\n\n                for(var value in collection[group]) {\n                    html += '<option value=\"'+value+'\" '+((value == currentValue) ? 'selected' : '')+'>'+collection[group][value]+'</option>';\n                }\n\n                html += '</optgroup>';\n            }\n        }\n\n        html += '</select>';\n        return new Handlebars.SafeString(html);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('dropdownOptionsArr', function(collection, currentValue, options) {\n\n        if (!collection) return '';\n\n        var html = '';\n\n        for (var i = 0; i < collection.length; i++) {\n            html += '<option value=\"'+collection[i].value+'\" '+((collection[i].value == currentValue) ? 'selected' : '')+'>'+collection[i].label+'</option>';\n        }\n\n        return new Handlebars.SafeString(html);\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('equalsInIndex', function(collection, index, value, options) {\n        var result = false;\n        //console.log(collection, index, value);\n\n        var defaultIfUndefined = true;\n\n        if (value.substr(-8) == '|default') {\n            value = value.substr(0, value.length - 8);\n        }\n\n        if (typeof collection != 'undefined') {\n            if (typeof collection[index] == 'undefined') {\n                result = false;\n\n                if (defaultIfUndefined) {\n                    result = true;\n                }\n            }\n            else {\n                if (collection[index] == value) result = true;\n            }\n        } else if (defaultIfUndefined) {\n            result = true;\n        }\n\n        if (result) {\n            return options.fn(this);\n        } else {\n            return options.inverse(this);\n        }\n    });\n\n}(window, jQuery));\n\n// ----------------------------------------------------------------------",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    if (!global.Campaigns) return;\n    if (!Campaigns.ENTRY_ID) return;\n\n    var holder;\n    var campaignUiJson;\n\n    // Are we on the View Entry Page?\n    if (document.getElementById('view_content_entry_links')) {\n        holder = $('#view_content_entry_links').closest('#mainContent');\n    }\n\n    // No holder?? QUIT\n    if (holder.length === 0) return false;\n\n    // Start the engines!\n    initViewEntry();\n\n    // ----------------------------------------------------------------------\n\n    function initViewEntry() {\n\n        // Add the basic html & loading msg\n        var startHtml = Campaigns.Templates.view_entry_init();\n        holder.find('.contents > .heading').after(startHtml);\n\n        // Assign the new holder\n        holder = holder.find('.campaigns');\n        Campaigns.ajaxError.holder = holder.find('.ajax_error');\n\n        // Get Campaign Data\n        getCampaignData();\n\n        // Bind Events\n        holder.delegate('.boxeslist a', 'click', toggleBox);\n        holder.delegate('.send_another', 'click', sendAnotherCampaign);\n\n        holder.delegate('button', 'click', function(evt){\n            var target = $(evt.target);\n\n            if (target.attr('href')) {\n                window.open(target.attr('href'), '_blank');\n            }\n        });\n\n        /*\n\n        holder.delegate('.change_schedule', 'click', changeSchedule);\n        holder.delegate('.hide_details', 'click', toggleCampaignDetails);\n        holder.delegate('.show_details', 'click', toggleCampaignDetails);\n        */\n    }\n\n    // ----------------------------------------------------------------------\n\n    function getCampaignData() {\n        Campaigns.emptyAjaxError();\n\n        var params = {};\n        params.ajax_method = 'getCampaignUi';\n        params.entry_id = Campaigns.ENTRY_ID;\n        if (EE.CSRF_TOKEN) params.CSRF_TOKEN = EE.CSRF_TOKEN;\n        else params.XID = EE.XID;\n\n        $.ajax({url: Campaigns.ACT_URL,\n            type: 'POST', dataType: 'json', data: params,\n            success: function(rdata) {\n                if (!rdata.success) {\n                    holder.html(rdata.errorMsg);\n                    return;\n                }\n                campaignUiJson = rdata;\n                openCampaign();\n            },\n            error: function(xhr) {\n                Campaigns.ajaxError.xhr = xhr;\n                holder.find('.loading').replaceWith('<h3>AJAX Error: <a href=\"#\" class=\"show_ajax_error\"><strong>Show</strong></a></h3>');\n            }\n        });\n    }\n\n    // ----------------------------------------------------------------------\n\n    function openCampaign(e, forceRender) {\n        var rdata = campaignUiJson;\n\n        holder.find('.innerwrap').replaceWith(Campaigns.Templates.boxes_ui_tabbed(rdata));\n\n        // Loop through all the boxes\n        for (var i in rdata.boxes) {\n\n            // Local var is easier\n            var box = rdata.boxes[i];\n\n            // Did we already do this? if yes, quit\n            if (typeof box.html != 'undefined' && !forceRender) continue;\n\n            // No campaigns? use the default one\n            if (box.campaigns.length === 0) {\n                box.campaigns = [box.emptyCampaign];\n            }\n\n            // Loop through all the campaigns\n            for (var ii = 0; ii < box.campaigns.length; ii++) {\n                addCampaign(box.campaigns[ii], box);\n            }\n        }\n\n        // Trigger the first tab, if we have one\n        holder.find('.boxeslist a:first').trigger('click');\n\n        bindCampaignItemEvents(holder);\n        syncOrderNumbers();\n    }\n\n    // ----------------------------------------------------------------------\n\n    function addCampaign(campaign, box, returnHtml) {\n        var html = '';\n        var boxHolder = $('#b_'+box.id).find('.campaigns-list');\n        var cm = campaign;\n        cm.box = box;\n        cm.global = campaignUiJson.global;\n        cm.scheduleDropdowns = campaignUiJson.schedule;\n        cm.deliverHtml = Campaigns.Templates.boxes_ui_deliver(cm);\n        cm.bottomButtonsHtml = Campaigns.Templates.boxes_ui_bottom_buttons(cm);\n        cm.serviceLogoUrl = cm.global.themeUrl + '/img/services/' + box.service + '.png';\n        cm.currentHtml = Campaigns.Templates.boxes_ui_current(cm);\n\n        if (typeof cm.showCurrent == 'undefined') {\n            cm.showCurrent = (cm.id > 0) ? true : false;\n        }\n\n        if (box.serviceType == 'email') {\n            html = Campaigns.Templates.boxes_email(cm);\n        } else {\n            html = Campaigns.Templates['boxes_'+box.service](cm);\n        }\n\n        html = $(html).data('campaign', cm);\n\n        if (returnHtml) return html;\n\n        boxHolder.find('.hide_details').trigger('click');\n        boxHolder.append(html);\n    }\n\n    // ----------------------------------------------------------------------\n\n    function bindCampaignItemEvents(holder) {\n        // Bind events\n        holder.find('.deliver-toggle').delegate('input', 'change', deliveryToggle).find('input:checked').trigger('change');\n        holder.find('button.deliver').click(sendCampaign);\n        holder.find('button.delete_item').click(deleteCampaign);\n\n\n        //holder.find('textarea.tweet_counter').trigger('keyup');\n\n        holder.find('.show_fb_item').click(function(){\n            $(this).closest('.campaign-item').find('.item_wrapper').toggle();\n            return false;\n        });\n\n    }\n\n    // ----------------------------------------------------------------------\n\n    function sendCampaign(e) {\n        e.preventDefault();\n        Campaigns.emptyAjaxError();\n\n        var target = $(e.target);\n        var deliverType = $(e.target).data('deliver');\n        var campaignHolder = target.closest('.campaign-item');\n        var errorHolder = target.closest('.box').find('.errors');\n        var params = campaignHolder.find(':input').serializeArray();\n        params.push({name:'entry_id', value:Campaigns.ENTRY_ID});\n        params.push({name:'ajax_method', value:'sendCampaign'});\n\n        if (EE.CSRF_TOKEN) params.push({name: 'CSRF_TOKEN', value: EE.CSRF_TOKEN});\n        else params.push({name: 'XID', value: EE.XID});\n\n        target.attr('disabled', 'disabled').addClass('disabled');\n\n        errorHolder.hide().find('ul').empty();\n        campaignHolder.find('.loading-wrapper').find('.loading, .success').hide();\n        campaignHolder.find('.loading-'+deliverType).show();\n\n\n        $.ajax({url: Campaigns.ACT_URL,\n            type: 'POST', dataType: 'json',\n            data: params,\n            success: function(rdata) {\n\n                if (deliverType == 'test') {\n                    target.removeAttr('disabled').removeClass('disabled');\n                }\n\n                campaignHolder.find('.loading-wrapper').find('.loading, .success').hide();\n\n                if (rdata.errorMsg) {\n                    errorHolder.show().find('ul').append('<li>'+rdata.errorMsg+'</li>');\n                    target.removeAttr('disabled').removeClass('disabled');\n                }\n                else if (rdata.errors.length > 0) {\n                    for (var i = 0; i < rdata.errors.length; i++) {\n                        errorHolder.show().find('ul').append('<li>'+rdata.errors[i].error+'</li>');\n                    }\n\n                    target.removeAttr('disabled').removeClass('disabled');\n                } else {\n                    // Testing Campaigns doesn't return the current key\n                    if (!rdata.campaign) {\n                        campaignHolder.find('.success-'+deliverType).show();\n                        return;\n                    }\n\n                    var campaign = rdata.campaign;\n                    var box = campaignUiJson.boxes['b_'+campaign.box_id];\n                    var html = addCampaign(campaign, box);\n                    campaignHolder.remove();\n                }\n            },\n            error: function(xhr) {\n                campaignHolder.find('.loading-wrapper').find('.loading, .success').hide();\n                target.removeAttr('disabled').removeClass('disabled');\n                errorHolder.show().find('ul').append('<li>AJAX Error: <a href=\"#\" class=\"show_ajax_error\"><strong>Show</strong></a></li>');\n                Campaigns.ajaxError.xhr = xhr;\n            }\n        });\n\n    }\n\n    // ----------------------------------------------------------------------\n\n    function sendAnotherCampaign(e) {\n        e.preventDefault();\n\n        $(e.target).hide(); // hide the button\n\n        var parent = $(e.target).closest('.campaign-item');\n        var boxId = parent.data('box_id');\n        var box = campaignUiJson.boxes['b_'+boxId];\n        var campaign = box.emptyCampaign;\n        addCampaign(campaign, box);\n\n        bindCampaignItemEvents(parent.closest('.box').find('.campaign-item:last'));\n        syncOrderNumbers();\n    }\n\n    // ----------------------------------------------------------------------\n\n    function deleteCampaign(evt) {\n        evt.preventDefault();\n        var resp = confirm('Are you sure you want to delete this campaign?');\n        if (!resp) return;\n\n        var parent = $(evt.target).parent();\n        var campaignItem = parent.closest('.campaign-item');\n        var id = campaignItem.data('id');\n\n        parent.find('button').hide();\n        parent.find('.loading').show();\n\n        var params = {};\n        params.ajax_method = 'deleteCampaignSend';\n        params.id = id;\n        if (EE.CSRF_TOKEN) params.CSRF_TOKEN = EE.CSRF_TOKEN;\n        else params.XID = EE.XID;\n\n        $.ajax({url: Campaigns.ACT_URL,\n            type: 'POST', dataType: 'json', data: params,\n            success: function(rdata) {\n                campaignItem.slideUp(function(){\n                    if (campaignItem.closest('.campaigns-list').find('.campaign-item').length === 1) {\n                        sendAnotherCampaign(evt);\n                    }\n\n                    campaignItem.remove();\n                    syncOrderNumbers();\n                });\n            },\n            error: function(xhr) {\n                Campaigns.ajaxError.xhr = xhr;\n                parent.find('.loading').replaceWith('<span class=\"right\">AJAX Error: <a href=\"#\" class=\"show_ajax_error\"><strong>Show</strong></a></span>');\n            }\n        });\n\n    }\n\n    // ----------------------------------------------------------------------\n\n    function toggleBox(evt) {\n        evt.preventDefault();\n\n        var target = (evt.target.nodeName == 'SPAN') ? $(evt.target).parent() : $(evt.target);\n        var parent = target.closest('ul');\n\n        parent.find('.selected').removeClass('selected');\n        target.parent().addClass('selected');\n\n        holder.find('.boxes').find('.box').hide();\n        holder.find('.boxes').find('#'+target.data('key')).show();\n    }\n\n    // ----------------------------------------------------------------------\n\n    function deliveryToggle(e) {\n        var val = $(e.target).val();\n        var parent = $(e.target).closest('.box');\n        parent.find('.deliver').hide();\n        parent.find('.deliver-'+val).show();\n    }\n\n    // ----------------------------------------------------------------------\n\n    function syncOrderNumbers() {\n\n        // Loop over all Files\n        holder.find('.box').each(function(ii, ee){\n            $(ee).find('.campaign-item').each(function(index, elem){\n                var cblock = $(elem);\n\n                // Find all form inputs\n                cblock.find('input, textarea, select').each(function(findex,felem){\n                    if (!felem.getAttribute('name')) return false;\n\n                    // Get it's attribute and change it\n                    var attr = $(this).attr('name').replace(new RegExp('\\\\[boxes\\\\]\\\\['+cblock.data('box_id')+'\\\\]\\\\[.*?\\\\]'), '[boxes]['+cblock.data('box_id')+'][' + (index+1) + ']');\n                    $(this).attr('name', attr);\n                });\n            });\n        });\n    }\n\n    // ----------------------------------------------------------------------\n/*\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    function changeSchedule(e) {\n        e.preventDefault();\n\n        var parent = $(e.target).closest('.campaign-item');\n        var boxId = parent.data('box_id');\n        var box = campaignUiJson.boxes['b_'+boxId];\n        var campaign = parent.data('campaign');\n        campaign.showCurrent = false;\n\n        var html = addCampaign(campaign, box, true);\n\n        parent.replaceWith(html);\n\n        bindCampaignItemEvents($('#b_'+boxId).find('.campaign-item:last'));\n        syncOrderNumbers();\n    }\n\n    // ----------------------------------------------------------------------\n\n\n\n    function toggleCampaignDetails(e) {\n        e.preventDefault();\n        var target = $(e.target);\n        var parent = target.closest('.campaign-item');\n\n        if (target.data('action') == 'hide') {\n            parent.find('.current-item').hide();\n            parent.find('.hide_details').hide();\n            parent.find('.show_details').show();\n        } else {\n            parent.find('.current-item').show();\n            parent.find('.hide_details').show();\n            parent.find('.show_details').hide();\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n\n\n    */\n\n}(window, jQuery));\n\n// ----------------------------------------------------------------------"]}